(this.webpackJsonpclontomixclient=this.webpackJsonpclontomixclient||[]).push([[0],{246:function(e,t,a){e.exports=a(462)},318:function(e,t,a){},462:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),i=a(28),o=a.n(i),l=a(38),s=a(44),u=a(7),m=a.n(u),p=a(11),d=a(14),f=a(463),E=a(104),v=a(243),b=a(117),g=a(79),h=a(472),y=a(478),x=a(479),w=a(480),j=a(481),O=a(482),k=a(81),T=a.n(k);n="/",n+="auth";var I=T.a.create({withCredentials:!0,baseURL:n}),S=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.post("/signup",t).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.post("/login",t).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get("/currentUser");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get("/logout");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.post("/profile",t).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.post("/profileAvatar",{profilePicture:t}).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=Object(r.createContext)();function L(e){var t=e.children,a=Object(r.useState)(null),n=Object(d.a)(a,2),i=n[0],o=n[1],l=function(e){return o(e)};return Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:t=e.sent,a=t.data.user,l(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){i?console.log("loggeado ".concat(i)):console.log("Se logeo el user ".concat(i))}),[i]),c.a.createElement(D.Provider,{value:{user:i,setCtxUser:l,clearCtxUser:function(){return o(null)}}},t)}var Y,M=f.a.Header,V=f.a.Content,R=f.a.Footer,_=f.a.Sider,U=E.a.SubMenu,q=function(e){var t=e.children,a=Object(r.useState)(!1),n=Object(d.a)(a,2),i=(n[0],n[1],Object(r.useContext)(D)),o=i.clearCtxUser,s=i.user,u=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:o(),v.b.success("Has cerrado tu sesion!");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(f.a,{style:{minHeight:"100vh"}},c.a.createElement(_,{style:{overflow:"auto",height:"100vh",position:"fixed",left:0}},c.a.createElement(E.a,{theme:"dark",defaultSelectedKeys:["1"],mode:"inline"},c.a.createElement(E.a.Item,{key:"1",icon:c.a.createElement(y.a,null)},c.a.createElement(l.b,{to:"/"},"Home")),!s&&c.a.createElement(E.a.Item,{key:"2",icon:c.a.createElement(x.a,null)},c.a.createElement(l.b,{to:"/signup"},"Signup")),!s&&c.a.createElement(E.a.Item,{key:"3",icon:c.a.createElement(w.a,null)},c.a.createElement(l.b,{to:"/login"},"Login")),s&&c.a.createElement(E.a.Item,{key:"4",icon:c.a.createElement(x.a,null)},c.a.createElement(l.b,{to:"/profile"},"Mi Perfil")),s&&("Editor"===s.roleType||"Admin"===s.roleType)&&c.a.createElement(U,{key:"sub1",icon:c.a.createElement(j.a,null),title:"Menu de Editor"},c.a.createElement(E.a.Item,{key:"101"},c.a.createElement(l.b,{to:"/listNoticias"},"Mis Noticias")),c.a.createElement(E.a.Item,{key:"100"},c.a.createElement(l.b,{to:"/newNoticia"},"Nueva Noticia"))),s&&"Admin"===s.roleType&&c.a.createElement(U,{key:"sub2",icon:c.a.createElement(j.a,null),title:"Menu de Admin"},c.a.createElement(E.a.Item,{key:"200"},c.a.createElement(l.b,{to:"/admin/aprobarNoticia"},"Aprobar Noticia")),c.a.createElement(E.a.Item,{key:"201"},c.a.createElement(l.b,{to:"/admin/destacarNoticia"},"Destacar Noticia"))),s&&c.a.createElement(E.a.Item,{key:"5",icon:c.a.createElement(O.a,null)},c.a.createElement(l.b,{to:"/",icon:c.a.createElement(O.a,null),onClick:u},"Cerrar Sesion")))),c.a.createElement(f.a,{className:"site-layout",style:{marginLeft:200}},c.a.createElement(M,{className:"site-layout-background",style:{padding:0,backgroundColor:"rgb(100,100,100,1)"}},c.a.createElement(b.a,{justify:"center",align:"middle"},c.a.createElement(g.a,null,c.a.createElement(h.a.Title,{level:1,style:{color:"White"}},"ClonTomix")))),c.a.createElement(V,{style:{margin:"24px 16px 0",overflow:"initial"}},c.a.createElement("div",{className:"site-layout-background",style:{padding:24,minHeight:360}},t)),c.a.createElement(R,{style:{textAlign:"center"}},"Clontomix \xa92020. Creado por D Zam, dise\xf1o de Ant D")))},B=(a(318),a(471)),z=a(476),H=a(47),K=h.a.Title,G={wrapperCol:{xs:{span:24,offset:0},sm:{span:12,offset:6}}},W=function(e){var t=B.a.useForm(),a=Object(d.a)(t,1)[0],n=Object(r.useState)(!1),i=Object(d.a)(n,2),o=i[0],l=i[1],s=Object(r.useState)(""),u=Object(d.a)(s,2),f=u[0],E=u[1],h=function(){var t=Object(p.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(!1),t.next=3,S(a);case 3:200===(n=t.sent).status?(v.b.success("Gracias por registrarse!"),e.history.push("/login")):(console.log(n),l(!0),E(n.message));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement(b.a,{justify:"center",gutter:24},c.a.createElement(g.a,G,c.a.createElement(K,{level:3},"Registro"))),c.a.createElement(B.a,{layout:"vertical",form:a,name:"register",onFinish:h,scrollToFirstError:!0},c.a.createElement(B.a.Item,{name:"username",label:"Nombre",rules:[{required:!0,message:"Favor de agregar un nombre de usuario",whitespace:!0}]},c.a.createElement(z.a,null)),c.a.createElement(B.a.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:"El email no es valido"},{required:!0,message:"Favor de agregar un email"}]},c.a.createElement(z.a,null)),c.a.createElement(B.a.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Favor de introducir un password"}],hasFeedback:!0},c.a.createElement(z.a.Password,null)),c.a.createElement(B.a.Item,{name:"confirmPassword",label:"Confirm Password",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Favor de confirmar su password"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject("Las password no coinciden"):Promise.resolve()}}}]},c.a.createElement(z.a.Password,null)),c.a.createElement(b.a,{justify:"center"},c.a.createElement(g.a,G,o&&c.a.createElement(K,{level:5,type:"warning"},f))),c.a.createElement(B.a.Item,G,c.a.createElement(H.a,{type:"primary",htmlType:"submit",block:!0,style:{marginTop:"30px"}},"Register"))))},J=a(464),Q=a(483),Z=a(484),$=a(485),X=h.a.Title;Y="/";var ee,te={wrapperCol:{xs:{span:24,offset:0},sm:{span:12,offset:6}}},ae=function(e){var t=B.a.useForm(),a=Object(d.a)(t,1)[0],n=Object(r.useState)(!1),i=Object(d.a)(n,2),o=i[0],l=i[1],s=Object(r.useState)(""),u=Object(d.a)(s,2),f=u[0],E=u[1],h=Object(r.useContext)(D).setCtxUser,y=function(){var t=Object(p.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(!1),t.next=3,C(a);case 3:200===(n=t.sent).status?(n.data.password="",h(n.data),r=n.data.username,v.b.success("Gracias por entrar ".concat(r)),e.history.push("/")):(console.log(n),l(!0),E(n.message));case 5:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}();return c.a.createElement("div",null,c.a.createElement(B.a,{name:"normal_login",form:a,layout:"vertical",className:"login-form",initialValues:{remember:!0},onFinish:y},c.a.createElement(B.a.Item,{name:"email",label:"Email",rules:[{type:"email",message:"El email no es valido"},{required:!0,message:"Favor de introducir su email"}]},c.a.createElement(z.a,{prefix:c.a.createElement(Q.a,{className:"site-form-item-icon"}),placeholder:"usuario@clontomix.com"})),c.a.createElement(B.a.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Favor de introducir su password!"}]},c.a.createElement(z.a,{prefix:c.a.createElement(Z.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password..."})),c.a.createElement(b.a,{justify:"center"},c.a.createElement(g.a,te,o&&c.a.createElement(X,{level:5,type:"warning"},f))),c.a.createElement(B.a.Item,te,c.a.createElement(H.a,{type:"primary",htmlType:"submit",className:"login-form-button",block:!0,style:{marginTop:"30px"}},"Log in"))),c.a.createElement(J.a,null,"Or"),c.a.createElement(b.a,null,c.a.createElement(g.a,{xs:24,sm:{span:12,offset:6}},c.a.createElement("a",{style:{color:"white",textDecoration:"none !important"},href:"".concat(Y,"auth/google")},c.a.createElement(H.a,{danger:!0,type:"primary",block:!0,style:{marginTop:"20px"}},c.a.createElement($.a,null),"Login con Google")))))},ne=a(467),re=a(473),ce=a(486);ee="/",ee+="api/comentario";var ie,oe=T.a.create({withCredentials:!0,baseURL:ee}),le=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.get("/").catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=Object(p.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.post("/".concat(t),a).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ue=function(){var e=Object(p.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.put("/".concat(t),a).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),me=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.delete("/".concat(t)).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=a(60),de=z.a.TextArea,fe=h.a.Title,Ee=function(){return v.b.success("Se edito el comentario satisfactoriamente")},ve=Object(r.forwardRef)((function(e,t){var a=e.comment,n=a._id,i=a.comentario,o=a.idNoticia.titulo,l=e.closeModal,s=e.changeData,u=B.a.useForm(),f=Object(d.a)(u,1)[0],E=Object(r.useState)(!1),v=Object(d.a)(E,2),h=v[0],y=v[1],x=Object(r.useState)(""),w=Object(d.a)(x,2),j=w[0],O=w[1];function k(){return(k=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!1),e.next=3,ue(n,t);case 3:201===(a=e.sent).status||200===a.status?(Ee(),l(!1),s(!0)):(console.log(a),y(!0),O(a.message));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useImperativeHandle)(t,(function(){return{showAlert:function(){f.submit()}}})),Object(r.useEffect)((function(){return function(){console.log("dismount"),f.resetFields(["comentario"])}}),[n]),c.a.createElement(c.a.Fragment,null,c.a.createElement(B.a,{layout:"vertical",form:f,onFinish:function(e){return k.apply(this,arguments)}},c.a.createElement(B.a.Item,{name:"comentario",label:"Edita el comentario de la noticia ".concat(o),initialValue:i,rules:[{min:10,message:"Favor de escribir mas de 10 caracteres"},{required:!0,message:"Favor de escribir un comentario",whitespace:!0}]},c.a.createElement(de,{allowClear:!0,rows:8})),c.a.createElement(b.a,{justify:"center"},c.a.createElement(g.a,{xs:24,sm:12},h&&c.a.createElement(fe,{level:5,type:"warning"},j)))))})),be=h.a.Title,ge=ne.a.Column,he=re.a.confirm,ye=z.a.TextArea,xe=function(){return v.b.success("Se actualizo los datos satisfactoriamente")},we={wrapperCol:{xs:{span:24,offset:0},sm:{span:12,offset:6}}},je=function(){var e,t=B.a.useForm(),a=Object(d.a)(t,1)[0],n=Object(r.useState)(!1),i=Object(d.a)(n,2),o=i[0],l=i[1],s=Object(r.useState)(""),u=Object(d.a)(s,2),f=u[0],E=u[1],v=Object(r.useState)(!1),h=Object(d.a)(v,2),y=h[0],x=h[1],w=Object(r.useState)(!1),j=Object(d.a)(w,2),O=j[0],k=j[1],I=Object(r.useState)(!1),S=Object(d.a)(I,2),C=S[0],F=S[1],L=Object(r.useContext)(D),Y=L.setCtxUser,M=L.user,V=Object(r.useState)(null),R=Object(d.a)(V,2),_=R[0],U=R[1],q=Object(r.useState)(!1),K=Object(d.a)(q,2),G=K[0],W=K[1],Q=Object(r.useState)({}),Z=Object(d.a)(Q,2),$=Z[0],X=Z[1],ee=Object(r.useRef)(),te=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:if(201!==(a=e.sent).status&&200!==a.status){e.next=13;break}return xe(),e.next=7,N();case 7:n=e.sent,r=n.data.user,Y(r),x(!0),e.next=16;break;case 13:console.log(a),l(!0),E(a.message);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n,r,c,i,o,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files,(n=new FormData).append("file",a[0]),n.append("upload_preset","ma1cews4"),e.next=6,T.a.post("https://api.cloudinary.com/v1_1/dsrw38rwx/image/upload",n);case 6:return r=e.sent,c=r.data.secure_url,e.next=10,A(c);case 10:if(201!==(i=e.sent).status&&200!==i.status){e.next=21;break}return xe(),e.next=15,N();case 15:o=e.sent,s=o.data.user,Y(s),k(!0),e.next=24;break;case 21:console.log(i),l(!0),E(i.message);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le();case 2:t=e.sent,a=t.data.comentariosPorUser,U(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),F(!1),k(!1),x(!1)}),[y,O,C]),M?c.a.createElement("div",null,c.a.createElement(b.a,{gutter:24},c.a.createElement(g.a,we,c.a.createElement(be,{level:2},"Mi Perfil"))),c.a.createElement(b.a,null,c.a.createElement(g.a,{xs:12},c.a.createElement(B.a,{layout:"vertical",form:a,onFinish:te},c.a.createElement(B.a.Item,{name:"facebook",label:"Facebook Link",initialValue:null===M||void 0===M?void 0:M.facebook},c.a.createElement(z.a,null)),c.a.createElement(B.a.Item,{name:"twitter",label:"Twitter Link",initialValue:null===M||void 0===M?void 0:M.twitter},c.a.createElement(z.a,null)),c.a.createElement(B.a.Item,{name:"acercaDe",label:"Acerca de ti",initialValue:null===M||void 0===M?void 0:M.acercaDe},c.a.createElement(ye,{allowClear:!0,rows:4})),c.a.createElement(b.a,{justify:"center"},c.a.createElement(g.a,{xs:24},o&&c.a.createElement(be,{level:5,type:"warning"},f))),c.a.createElement(B.a.Item,we,c.a.createElement(H.a,{type:"primary",htmlType:"submit",block:!0,style:{marginTop:"30px"}},"Actualizar Datos")))),c.a.createElement(g.a,{xs:12},c.a.createElement(b.a,{justify:"center",align:"middle",style:{marginBottom:"40px"}},c.a.createElement("img",{style:{objectFit:"cover",width:"300px",height:"300px",borderRadius:"200px"},alt:"perfil",src:null===M||void 0===M?void 0:M.profilePicture})),c.a.createElement(b.a,{justify:"center",align:"middle"},c.a.createElement("input",{type:"file",id:"file",onChange:ae}),c.a.createElement("label",{htmlFor:"file"},"Upload")))),c.a.createElement(J.a,null),c.a.createElement(b.a,{justify:"center",gutter:24},c.a.createElement(g.a,we,c.a.createElement(be,{level:3},"Mis comentarios "))),c.a.createElement(ne.a,{key:"comentarios",rowKey:function(e){return e._id},dataSource:_},c.a.createElement(ge,{title:"Titulo de la Noticia",dataIndex:"idNoticia.titulo",key:"idNoticia.titulo",render:function(e,t){return t.idNoticia.titulo}}),c.a.createElement(ge,{title:"Comentario",dataIndex:"comentario",key:"comentario"}),c.a.createElement(ge,{title:"Fecha",dataIndex:"createdAt",key:"createdAt",render:function(e,t){return pe.DateTime.fromISO(t.createdAt).toLocaleString(pe.DateTime.DATETIME_SHORT)}}),c.a.createElement(ge,{title:"Editar Comentario",key:"Editar",render:function(e,t){return c.a.createElement(c.a.Fragment,null,c.a.createElement(H.a,{onClick:function(){W(!0),X(t)},type:"primary"},"Editar"))}}),c.a.createElement(ge,{title:"Borrar Comentario",key:"Borrar",render:function(e,t){return c.a.createElement(c.a.Fragment,null,c.a.createElement(H.a,{onClick:function(){return function(e){var t=e.idNoticia.titulo,a=e._id;he({title:"Eliminar Comentario",icon:c.a.createElement(ce.a,null),content:"Desea eliminar el comentario en la noticia ".concat(t,'"?'),okText:"Si",okType:"Primary",cancelText:"No",centered:!0,onOk:function(){return Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me(a);case 2:F(!0);case 3:case"end":return e.stop()}}),e)})))()},onCancel:function(){}})}(t)},type:"danger"},"Borrar"))}})),c.a.createElement(re.a,{centered:!0,title:"Agrega Comentario a "+(null===$||void 0===$||null===(e=$.idNoticia)||void 0===e?void 0:e.titulo),visible:G,onCancel:function(){return W(!1)},onOk:function(){ee.current.showAlert()},okType:"primary",width:700},c.a.createElement(ve,{ref:ee,comment:$,closeModal:W,changeData:F}))):c.a.createElement("div",null)},Oe=a(240),ke=a(470),Te=a(159),Ie=a.n(Te),Se=h.a.Title,Ce=h.a.Text,Ne=function(e){var t=e.news;return c.a.createElement(c.a.Fragment,null,c.a.createElement(g.a,{sm:24,md:{span:16,offset:4}},c.a.createElement(ke.a,{style:{marginBottom:"30px",minHeight:"400px"},title:c.a.createElement(Se,{level:3},t.titulo),bordered:!1,cover:"Imagen"===t.tipoPresentacion?c.a.createElement("center",null,c.a.createElement("img",{style:{marginTop:"30px",width:"100%"},alt:"example",src:null===t||void 0===t?void 0:t.img})):c.a.createElement("center",null,c.a.createElement(Ie.a,{url:null===t||void 0===t?void 0:t.ytLink,style:{marginTop:"30px"}}))},c.a.createElement(b.a,{gutter:[0,50]},c.a.createElement(g.a,null,t.contenido.length>500?t.contenido.substring(0,497).concat("..."):t.contenido)),c.a.createElement(J.a,null),c.a.createElement(b.a,null,c.a.createElement(g.a,{span:12},c.a.createElement(Ce,{strong:!0},"Autor:")," ",t.idUser.username),c.a.createElement(g.a,{span:12},c.a.createElement(Ce,{strong:!0},"Fecha de Publicacion:")," ",pe.DateTime.fromISO(t.fechaParaPublicacion).toLocaleString())),c.a.createElement(b.a,null,c.a.createElement(g.a,{span:12},c.a.createElement(Ce,{strong:!0},t.idComentarios.length)," comentario(s)"),c.a.createElement(g.a,{span:12},c.a.createElement(Ce,{strong:!0},"Tipo de Noticia:")," ",t.tipoNoticia)),c.a.createElement(b.a,{gutter:20},c.a.createElement(g.a,{justify:"center",align:"middle",style:{marginTop:"20px"},span:24},c.a.createElement(Se,{level:3},c.a.createElement(l.b,{to:"/noticia/".concat(t._id)},"Ir a leer la noticia")))))))},Fe=a(465);ie="/",ie+="api/destacado";var Pe,Ae=T.a.create({withCredentials:!0,baseURL:ie}),De=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.get("/").catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Le=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.post("/",{idNoticia:t}).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ye=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.delete("/".concat(t)).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Me=h.a.Title,Ve=function(){var e=Object(r.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1],i=Object(r.useState)(!0),o=Object(d.a)(i,2),s=o[0],u=o[1];Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De();case 2:t=e.sent,a=t.data,n(a),u(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){}}),[]);var f={height:"160px",color:"#fff",lineHeight:"160px",display:"flex",justifyContent:"space-around",background:"#45b4df"};return s?c.a.createElement(c.a.Fragment,null,"Loading"):(s||a)&&!s&&a?(console.log(a),c.a.createElement(c.a.Fragment,null,c.a.createElement(b.a,{justify:"center",gutter:30},c.a.createElement(g.a,null,c.a.createElement(Me,{level:1},"Noticias Destacadas:"))),c.a.createElement(b.a,{justify:"center"},c.a.createElement(g.a,{sm:24,md:{span:16}},c.a.createElement(Fe.a,{autoplay:!0},null===a||void 0===a?void 0:a.map((function(e){return c.a.createElement(l.b,{to:"/noticia/".concat(e.idNoticia._id)},c.a.createElement("div",{name:"Hola",key:e._id,style:f},c.a.createElement("img",{alt:"",src:e.idNoticia.img,style:{height:"160px"}}),c.a.createElement("h3",null,e.idNoticia.titulo)))}))))))):c.a.createElement(c.a.Fragment,null)},Re=h.a.Title,_e=function(e){return fetch(e).then((function(e){return e.json()}))};Pe="/",console.log(Pe);var Ue=function(){var e,t,a=Object(Oe.a)((function(e,t){return t&&0===t.length?null:"".concat(Pe,"api/noticia/pagination?page=").concat(e)}),_e),n=a.data,r=a.error,i=(a.mutate,a.size),o=a.setSize,l=(a.isValidating,n?n.map((function(e){return e.noticias})):[]),s=!n&&!r||i>0&&n&&"undefined"===typeof n[i-1],u=0===(null===n||void 0===n||null===(e=n[0])||void 0===e?void 0:e.length)||n&&(null===n||void 0===n?void 0:n.length)<10;return console.log(l),n?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,c.a.createElement(Ve,null)),c.a.createElement(J.a,null),c.a.createElement("div",null,c.a.createElement(b.a,{justify:"center",gutter:30},c.a.createElement(g.a,null,c.a.createElement(Re,{level:1},"Noticias:"))),null===l||void 0===l||null===(t=l.flat())||void 0===t?void 0:t.map((function(e){return c.a.createElement(Ne,{key:e._id,news:e})}))),c.a.createElement("div",null,c.a.createElement(b.a,{justify:"center",gutter:30},c.a.createElement(g.a,null,c.a.createElement(H.a,{type:"primary",disabled:s||u,onClick:function(){return o(i+1)}},s?"loading...":u?"No mas noticias...":"Cargar mas noticias"))))):c.a.createElement("p",null,"Loading...")},qe=a(68),Be=a(132),ze=a(468),He=a(469);var Ke,Ge=function(e){var t=e.setPhotos,a=e.setArrayPhotos,n=Object(r.useState)({previewVisible:!1,previewImage:"",previewTitle:"",fileList:[],uploaded:[]}),i=Object(d.a)(n,2),o=i[0],l=i[1];function s(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))}var u=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,s(t.originFileObj);case 3:t.preview=e.sent;case 4:l(Object(qe.a)(Object(qe.a)({},o),{},{previewImage:t.url||t.preview,previewVisible:!0,previewTitle:t.name||t.url.substring(t.url.lastIndexOf("/")+1)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function f(){return(f=Object(p.a)(m.a.mark((function e(a){var n,r,c,i,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.file,r=a.onSuccess,e.prev=1,(c=new FormData).append("file",n),c.append("upload_preset","ma1cews4"),e.next=7,fetch("https://api.cloudinary.com/v1_1/dsrw38rwx/image/upload",{method:"POST",body:c});case 7:return i=e.sent,e.next=10,i.json();case 10:o=e.sent,t(o.secure_url),r(o,n),e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(1),e.t0;case 18:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}var E=o.previewVisible,v=o.previewImage,b=o.fileList,g=o.previewTitle,h=c.a.createElement("div",null,c.a.createElement("div",{className:"ant-upload-text"},"Upload photo"));return c.a.createElement("div",{className:"clearfix"},c.a.createElement(He.a,{listType:"picture-card",fileList:b,onPreview:u,onChange:function(e){var t=e.fileList;l(Object(qe.a)(Object(qe.a)({},o),{},{fileList:t}));var n=[];0!==t.length?(t.forEach((function(e,t){var a;n.push(null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.secure_url)})),a(n)):a(n)},customRequest:function(e){return f.apply(this,arguments)}},b.length>=8?null:h),c.a.createElement(re.a,{visible:E,title:g,footer:null,onCancel:function(){return l(Object(qe.a)(Object(qe.a)({},o),{},{previewVisible:!1}))}},c.a.createElement("img",{alt:"example",style:{width:"100%"},src:v})))};Ke="/",Ke+="api/noticia";var We=T.a.create({withCredentials:!0,baseURL:Ke}),Je=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.get("/user/".concat(t)).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.post("/",t).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ze=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.get("/detail/".concat(t)).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$e=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.put("/edit/".concat(t.noticiaId),t).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xe=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.delete("/delete/".concat(t)).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),et=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.get("/notApproved").catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),tt=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.put("/approved/".concat(t)).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),at=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.get("/noticiasDestacadas").catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),nt=a(53),rt=a.n(nt),ct=z.a.TextArea,it=Be.a.Option,ot=h.a.Title,lt=rt()().format("DD/MM/YYYY"),st={wrapperCol:{xs:{span:24,offset:0},sm:{span:12,offset:6}}},ut=function(e){var t=B.a.useForm(),a=Object(d.a)(t,1)[0],n=Object(r.useState)(!1),i=Object(d.a)(n,2),o=i[0],l=i[1],u=Object(r.useState)(""),f=Object(d.a)(u,2),E=f[0],h=f[1],y=Object(r.useState)(!1),x=Object(d.a)(y,2),w=x[0],j=x[1],O=Object(r.useState)([]),k=Object(d.a)(O,2),T=k[0],I=k[1],S=Object(r.useState)(""),C=Object(d.a)(S,2),N=C[0],F=C[1],P=Object(r.useContext)(D).user,A=function(){var t=Object(p.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l(!1),0!==T.length){t.next=5;break}return l(!0),h("Es necesario agregar imagenes"),t.abrupt("return",!1);case 5:return t.next=7,Qe(Object(qe.a)(Object(qe.a)({},a),{},{imgArray:T,img:N}));case 7:200===(n=t.sent).status||201===n.status?(v.b.success("Se agrego la noticia satisfactoriamente"),e.history.push("/")):(console.log(n),l(!0),h(n.message));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return!P||P&&"User"===P.roleType?c.a.createElement(s.a,{to:"/"}):c.a.createElement("div",null,c.a.createElement(b.a,{justify:"center",gutter:16},c.a.createElement(g.a,st,c.a.createElement(ot,{level:2},"Agregar Noticia"))),c.a.createElement(B.a,{layout:"vertical",form:a,name:"register",onFinish:A,scrollToFirstError:!0},c.a.createElement(B.a.Item,{name:"titulo",label:"Titulo de la Noticia",rules:[{required:!0,message:"Favor de agregar un titulo",whitespace:!0}]},c.a.createElement(z.a,null)),c.a.createElement(B.a.Item,{name:"contenido",label:"Contenido de la Noticia",rules:[{required:!0,message:"Es necesario agregar contenido a la noticia",whitespace:!0}]},c.a.createElement(ct,null)),c.a.createElement(B.a.Item,{name:"fechaParaPublicacion",label:"Cuando se publica la noticia"},c.a.createElement(ze.a,{placeholder:"Elige Fecha",defaultValue:rt()(lt,"DD/MM/YYYY"),format:"DD/MM/YYYY"})),c.a.createElement(B.a.Item,{name:"tipoNoticia",label:"Tipo de Noticia",initialValue:"Editorial",rules:[{required:!0,message:"Es necesario escoger un tipo"}]},c.a.createElement(Be.a,null,c.a.createElement(it,{value:"Editorial"},"Editorial"),c.a.createElement(it,{value:"Rumor"},"Rumor"),c.a.createElement(it,{value:"Review"},"Review "))),c.a.createElement(B.a.Item,{name:"tipoPresentacion",label:"Tipo de Portada (Imagen o Video)",initialValue:"Imagen",rules:[{required:!0,message:"Es necesario escoger un tipo de presentacion"}]},c.a.createElement(Be.a,{onChange:function(){j(!w),console.log(w)}},c.a.createElement(it,{value:"Imagen"},"Imagen"),c.a.createElement(it,{value:"Video"},"Video"))),c.a.createElement(B.a.Item,{name:"ytLink",label:"Link de Video Youtube",hidden:!w,rules:[{required:!!w,message:"Favor de agregar un link",whitespace:!0}]},c.a.createElement(z.a,null)),c.a.createElement(B.a.Item,{name:"Imagenes",label:"Imagenes"},c.a.createElement(Ge,{setArrayPhotos:I,setPhotos:F})),c.a.createElement(b.a,{justify:"center"},c.a.createElement(g.a,st,o&&c.a.createElement(ot,{level:5,type:"warning"},E))),c.a.createElement(B.a.Item,st,c.a.createElement(H.a,{type:"primary",htmlType:"submit",block:!0,style:{marginTop:"30px"}},"A\xf1adir Noticia"))))},mt=a(162),pt=z.a.TextArea,dt=Be.a.Option,ft=h.a.Title,Et=h.a.Text,vt=(rt()().format("DD/MM/YYYY"),{wrapperCol:{xs:{span:24,offset:0},sm:{span:12,offset:6}}}),bt=function(e){var t=B.a.useForm(),a=Object(d.a)(t,1)[0],n=Object(r.useState)(!1),i=Object(d.a)(n,2),o=i[0],l=i[1],u=Object(r.useState)(""),f=Object(d.a)(u,2),E=f[0],h=f[1],y=Object(r.useState)(null),x=Object(d.a)(y,2),w=x[0],j=x[1],O=e.match.params.noticiaId,k=Object(r.useContext)(D).user,T=Object(r.useState)(!1),I=Object(d.a)(T,2),S=I[0],C=I[1],N=Object(r.useState)([]),F=Object(d.a)(N,2),P=F[0],A=F[1],L=Object(r.useState)(""),Y=Object(d.a)(L,2),M=Y[0],V=Y[1],R=Object(r.useState)(!1),_=Object(d.a)(R,2),U=_[0],q=_[1],K=function(){var t=Object(p.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l(!1),0!==P.length||!U){t.next=5;break}return l(!0),h("Es necesario agregar imagenes"),t.abrupt("return",!1);case 5:return t.next=7,$e(Object(qe.a)(Object(qe.a)({},a),{},{noticiaId:O,imgArray:P,img:M}));case 7:201===(n=t.sent).status?(v.b.success("Se edito la noticia satisfactoriamente"),e.history.push("/listNoticias")):(console.log(n),l(!0),h(n.message));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze(O);case 2:t=e.sent,a=t.data,j(a),C("Video"===a.tipoPresentacion);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),console.log(k)}),[]),!k||k&&"User"===k.roleType?c.a.createElement(s.a,{to:"/"}):w?c.a.createElement("div",null,c.a.createElement(b.a,{justify:"center",gutter:16},c.a.createElement(g.a,vt,c.a.createElement(ft,{level:2},"Editar Noticia"))),!w.noticiaAprobada&&c.a.createElement(b.a,{justify:"center",gutter:16},c.a.createElement(g.a,vt,c.a.createElement(Et,{level:2,type:"danger"},"Esta noticia aun no ha sido aprobada"))),c.a.createElement(B.a,{layout:"vertical",form:a,name:"register",onFinish:K,scrollToFirstError:!0},c.a.createElement(B.a.Item,{name:"titulo",label:"Titulo de la Noticia",initialValue:w.titulo,rules:[{required:!0,message:"Favor de agregar un titulo",whitespace:!0}]},c.a.createElement(z.a,null)),c.a.createElement(B.a.Item,{name:"contenido",label:"Contenido de la Noticia",initialValue:w.contenido,rules:[{required:!0,message:"Es necesario agregar contenido a la noticia",whitespace:!0}]},c.a.createElement(pt,null)),c.a.createElement(B.a.Item,{name:"fechaParaPublicacion",label:"Cuando se publica la noticia",initialValue:rt()(rt()(w.fechaParaPublicacion).format("DD/MM/YYYY"),"DD/MM/YYYY")},c.a.createElement(ze.a,{placeholder:"Elige Fecha",format:"DD/MM/YYYY"})),c.a.createElement(B.a.Item,{name:"tipoNoticia",label:"Tipo de Noticia",initialValue:w.tipoNoticia,rules:[{required:!0,message:"Es necesario escoger un tipo"}]},c.a.createElement(Be.a,null,c.a.createElement(dt,{value:"Editorial"},"Editorial"),c.a.createElement(dt,{value:"Rumor"},"Rumor"),c.a.createElement(dt,{value:"Review"},"Review "))),c.a.createElement(B.a.Item,{name:"tipoPresentacion",label:"Tipo de Portada (Imagen o Video)",initialValue:w.tipoPresentacion,rules:[{required:!0,message:"Es necesario escoger un tipo de presentacion"}]},c.a.createElement(Be.a,{onChange:function(){C(!S),console.log(S)}},c.a.createElement(dt,{value:"Imagen"},"Imagen"),c.a.createElement(dt,{value:"Video"},"Video"))),c.a.createElement(B.a.Item,{name:"ytLink",label:"Link de Video Youtube",hidden:!S,initialValue:w.ytLink,rules:[{required:!!S,message:"Favor de agregar un link",whitespace:!0}]},c.a.createElement(z.a,null)),c.a.createElement(B.a.Item,{name:"Imagenes",label:"Imagenes"},c.a.createElement(Ge,{setArrayPhotos:A,setPhotos:V})),c.a.createElement(B.a.Item,{name:"borrarPhoto",label:"Eliminar Imagenes Anteriores",initialValue:!1},c.a.createElement(mt.a.Group,{onChange:function(e){q(e.target.value)}},c.a.createElement(mt.a.Button,{value:!1},"A\xf1adir"),c.a.createElement(mt.a.Button,{value:!0},"Reemplazar"))),c.a.createElement(b.a,{justify:"start"},c.a.createElement(g.a,null,!U&&c.a.createElement(ft,{level:5,type:"keyboard"},"Las imagenes nuevas se a\xf1aden"),U&&c.a.createElement(ft,{level:5,type:"danger"},"Las imagenes nuevas reemplazan"))),c.a.createElement(b.a,{justify:"center"},c.a.createElement(g.a,vt,o&&c.a.createElement(ft,{level:5,type:"warning"},E))),c.a.createElement(B.a.Item,vt,c.a.createElement(H.a,{type:"primary",htmlType:"submit",block:!0,style:{marginTop:"30px"}},"Editar Noticia")))):c.a.createElement("div",null,"Estoy cargando")},gt=a(477),ht=ne.a.Column,yt=re.a.confirm,xt=h.a.Title,wt={wrapperCol:{xs:{span:24,offset:0},sm:{span:12,offset:6}}};function jt(){return(jt=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe(t);case 2:200===(a=e.sent).status?alert("Todo bien"):console.log(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ot=function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),a=t[0],n=t[1],i=Object(r.useState)([]),o=Object(d.a)(i,2),s=o[0],u=o[1],f=Object(r.useContext)(D).user;function E(e){var t=e.titulo,a=e._id;yt({title:"Borrar Noticia",icon:c.a.createElement(ce.a,null),content:"En verdad deseas eliminar la noticia: ".concat(t),okText:"Si",okType:"danger",cancelText:"No",onOk:function(){!function(e){jt.apply(this,arguments)}(a),n(!0)},onCancel:function(){}})}return Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je(null===f||void 0===f?void 0:f._id);case 2:t=e.sent,a=t.data,u(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),n(!1)}),[a,f]),c.a.createElement("div",null,c.a.createElement(b.a,{justify:"center",gutter:24},c.a.createElement(g.a,wt,c.a.createElement(xt,{level:3},"Mis noticias publicadas"))),s?c.a.createElement(ne.a,{key:"x",rowKey:function(e){return e._id},dataSource:s},c.a.createElement(ht,{title:"Titulo de la Noticia",dataIndex:"titulo",key:"titulo"}),c.a.createElement(ht,{title:"Aprobada",dataIndex:"noticiaAprobada",key:"noticiaAprobada",render:function(e,t){return t.noticiaAprobada?"Si":"no"}}),c.a.createElement(ht,{title:"Fecha para Publicar",dataIndex:"fechaParaPublicacion",key:"fechaParaPublicacion",render:function(e,t){return rt()(t.fechaParaPublicacion).format("DD/MM/YYYY")}}),c.a.createElement(ht,{title:"Editar",key:"editar",render:function(e,t){return c.a.createElement(gt.b,{size:"middle"},c.a.createElement(H.a,{type:"primary"},c.a.createElement(l.b,{to:"/editNoticia/".concat(t._id)},"Editar Noticia")))}}),c.a.createElement(ht,{title:"Borrar",key:"Borrar",render:function(e,t){return c.a.createElement(gt.b,{size:"middle"},c.a.createElement(H.a,{onClick:function(){return E(t)},danger:!0,type:"dashed"},"Borrar Noticia"))}})):c.a.createElement("h1",null,"Hola"))},kt=z.a.TextArea,Tt=h.a.Title,It=function(){return v.b.success("Se agrego el comentario satisfactoriamente")},St=Object(r.forwardRef)((function(e,t){var a=e.noticiaId,n=e.titulo,i=e.closeModal,o=e.addedComment,l=B.a.useForm(),s=Object(d.a)(l,1)[0],u=Object(r.useState)(!1),f=Object(d.a)(u,2),E=f[0],v=f[1],h=Object(r.useState)(""),y=Object(d.a)(h,2),x=y[0],w=y[1];function j(){return(j=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!1),e.next=3,se(a,t);case 3:201===(n=e.sent).status||200===n.status?(It(),i(!1),o(!0)):(console.log(n),v(!0),w(n.message));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useImperativeHandle)(t,(function(){return{showAlert:function(){s.submit()}}})),Object(r.useEffect)((function(){return function(){console.log("dismount"),s.resetFields(["comentario"])}})),c.a.createElement(c.a.Fragment,null,c.a.createElement(B.a,{layout:"vertical",form:s,onFinish:function(e){return j.apply(this,arguments)}},c.a.createElement(B.a.Item,{name:"comentario",label:"Agrega un comentario a ".concat(n),rules:[{min:10,message:"Favor de escribir mas de 10 caracteres"},{required:!0,message:"Favor de escribir un comentario",whitespace:!0}]},c.a.createElement(kt,{allowClear:!0,rows:8})),c.a.createElement(b.a,{justify:"center"},c.a.createElement(g.a,{xs:24,sm:12},E&&c.a.createElement(Tt,{level:5,type:"warning"},x)))))})),Ct=a(474),Nt=h.a.Title,Ft=h.a.Text,Pt=function(e){var t=e.news;return c.a.createElement(c.a.Fragment,null,c.a.createElement(g.a,{sm:24,md:{span:16,offset:4}},c.a.createElement(ke.a,{style:{marginBottom:"30px",borderRadius:"10px"},title:c.a.createElement(Nt,{level:2},t.titulo),bordered:!1,cover:"Imagen"===t.tipoPresentacion?c.a.createElement("center",null,c.a.createElement("img",{style:{marginTop:"30px",width:"100%"},alt:"example",src:t.img})):c.a.createElement("center",null,c.a.createElement(Ie.a,{url:t.ytLink,style:{marginTop:"30px"},light:!0}))},c.a.createElement(b.a,{gutter:[0,50]},c.a.createElement(g.a,null,c.a.createElement("p",{style:{fontSize:"16px"}},t.contenido))),c.a.createElement(b.a,{gutter:[0,50]},c.a.createElement(g.a,null,t.imgArray.map((function(e){return c.a.createElement(Ct.a,{style:{marginLeft:"20px"},width:100,height:100,src:e})})))),c.a.createElement(J.a,null),c.a.createElement(b.a,null,c.a.createElement(g.a,{span:12},c.a.createElement(Ft,{strong:!0},"Autor:")," ",t.idUser.username),c.a.createElement(g.a,{span:12},c.a.createElement(Ft,{strong:!0},"Fecha de Publicacion:")," ",pe.DateTime.fromISO(t.fechaParaPublicacion).toLocaleString())),c.a.createElement(b.a,null,c.a.createElement(g.a,{span:12},c.a.createElement(Ft,{strong:!0},t.idComentarios.length)," comentario(s)"),c.a.createElement(g.a,{span:12},c.a.createElement(Ft,{strong:!0},"Tipo de Noticia:")," ",t.tipoNoticia)))))},At=a(466),Dt=a(475),Lt=a(76),Yt=function(e){var t=e.values;return c.a.createElement(g.a,{sm:24,md:{span:16,offset:4}},c.a.createElement(At.a,{style:{border:"1px solid black",borderRadius:"20px",padding:"20px",background:"white",marginBottom:"20px"},author:c.a.createElement("span",{style:{fontSize:"16px"}},t.idUser.username),avatar:c.a.createElement(Dt.a,{className:"extra",shape:"square",size:64,src:t.idUser.profilePicture,alt:t.idUser.username}),content:c.a.createElement("p",{style:{fontSize:"16px"}},t.comentario),datetime:c.a.createElement(Lt.a,{title:pe.DateTime.fromISO(t.createdAt).toLocaleString(pe.DateTime.DATETIME_SHORT)},c.a.createElement("span",null,pe.DateTime.local().toRelative({base:pe.DateTime.fromISO(t.createdAt)})))}))},Mt=h.a.Title,Vt=function(e){var t,a=e.match.params.noticiaId,n=Object(r.useState)(null),i=Object(d.a)(n,2),o=i[0],s=i[1],u=Object(r.useState)(!1),f=Object(d.a)(u,2),E=f[0],v=f[1],h=Object(r.useState)(!1),y=Object(d.a)(h,2),x=y[0],w=y[1],j=Object(r.useRef)(),O=Object(r.useContext)(D).user;return Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze(a);case 2:t=e.sent,n=t.data,s(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),w(!1)}),[x]),o&&o.noticiaAprobada?c.a.createElement(c.a.Fragment,null,c.a.createElement(Pt,{news:o}),c.a.createElement(b.a,{gutter:[16,16]},c.a.createElement(g.a,{sm:24,md:{span:16,offset:4}},c.a.createElement(J.a,null))),c.a.createElement(b.a,{gutter:[16,16]},c.a.createElement(g.a,{sm:24,md:{span:16,offset:4}},O?c.a.createElement(c.a.Fragment,null,c.a.createElement(H.a,{block:!0,type:"primary",onClick:function(){return v(!0)}},"Agrega un Comentario"),c.a.createElement(re.a,{centered:!0,title:"Agrega Comentario a "+o.titulo,visible:E,onCancel:function(){return v(!1)},onOk:function(){j.current.showAlert()},width:700},c.a.createElement(St,{ref:j,noticiaId:o._id,titulo:o.titulo,closeModal:v,addedComment:w}))):c.a.createElement(l.b,{to:"/login"},c.a.createElement(H.a,{type:"primary",block:!0},"Necesitas hacer login para escribir comentarios")))),c.a.createElement(b.a,{gutter:[16,16]},c.a.createElement(g.a,{sm:24,md:{span:16,offset:4}},c.a.createElement(J.a,null))),c.a.createElement(b.a,{gutter:[16,16]},c.a.createElement(g.a,{sm:24,md:{span:16,offset:4}},c.a.createElement(Mt,{level:4},"Comentarios"))),null===(t=o.idComentarios.flat())||void 0===t?void 0:t.map((function(e){return c.a.createElement(Yt,{key:e._id,values:e})}))):o&&!o.noticiaAprobada?c.a.createElement(c.a.Fragment,null,c.a.createElement(b.a,{gutter:[16,16]},c.a.createElement(g.a,{xs:24},c.a.createElement("h1",null,"Esta noticia se esta cocinando...")))):c.a.createElement("h1",null,"Esta noticia se esta preparando...")},Rt=ne.a.Column,_t=re.a.confirm,Ut=h.a.Title,qt={wrapperCol:{xs:{span:24,offset:0},sm:{span:12,offset:6}}},Bt=function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt(t);case 2:200===(a=e.sent).status?v.b.success("Se aprobo la noticia satisfactoriamente"):console.log(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),zt=function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),a=t[0],n=t[1],i=Object(r.useState)([]),o=Object(d.a)(i,2),l=o[0],u=o[1],f=Object(r.useContext)(D).user;return Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et();case 2:t=e.sent,a=t.data.noticiasNotApproved,u(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),n(!1)}),[a,f]),!f||f&&"Admin"!==f.roleType?c.a.createElement(s.a,{to:"/"}):c.a.createElement("div",null,c.a.createElement(b.a,{justify:"center",gutter:24},c.a.createElement(g.a,qt,c.a.createElement(Ut,{level:3},"Mis noticias publicadas"))),c.a.createElement(ne.a,{key:"x",rowKey:function(e){return e._id},dataSource:l},c.a.createElement(Rt,{title:"Titulo de la Noticia",dataIndex:"titulo",key:"titulo"}),c.a.createElement(Rt,{title:"Fecha para Publicar",dataIndex:"fechaParaPublicacion",key:"fechaParaPublicacion",render:function(e,t){return pe.DateTime.fromISO(t.fechaParaPublicacion).toLocaleString()}}),c.a.createElement(Rt,{title:"Aprobar",key:"Aprobar",render:function(e,t){return c.a.createElement(gt.b,{size:"middle"},c.a.createElement(H.a,{onClick:function(){return function(e){var t=e.titulo,a=e._id;_t({title:"Aprobar Noticia",icon:c.a.createElement(ce.a,null),content:'Aprobar la noticia "'.concat(t,'" para su publicacion?'),okText:"Si",cancelText:"No",cancelType:"Dashed",centered:!0,onOk:function(){Bt(a),n(!0)},onCancel:function(){}})}(t)},primary:!0,type:"dashed"},"Aprobar Noticia"))}})))},Ht=a(487),Kt=ne.a.Column,Gt=re.a.confirm,Wt=h.a.Title,Jt={wrapperCol:{xs:{span:24,offset:0},sm:{span:12,offset:6}}},Qt=function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le(t);case 2:200===(a=e.sent).status?v.b.success("Se agrego una noticia como destacada"):console.log(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Zt=function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye(t);case 2:200===(a=e.sent).status?v.b.success("Se elimino la noticia como destacada"):console.log(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$t=function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),a=t[0],n=t[1],i=Object(r.useState)([]),o=Object(d.a)(i,2),l=o[0],u=o[1],f=Object(r.useContext)(D).user;return Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at();case 2:t=e.sent,a=t.data,u(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),n(!1)}),[a,f]),!f||f&&"Admin"!==f.roleType?c.a.createElement(s.a,{to:"/"}):c.a.createElement("div",null,c.a.createElement(b.a,{justify:"center",gutter:24},c.a.createElement(g.a,Jt,c.a.createElement(Wt,{level:3},"Mis noticias publicadas"))),c.a.createElement(ne.a,{key:"x",rowKey:function(e){return e._id},dataSource:l},c.a.createElement(Kt,{title:"Titulo de la Noticia",dataIndex:"titulo",key:"titulo"}),c.a.createElement(Kt,{title:"Accion",key:"Accion",align:"center",render:function(e,t){var a;return c.a.createElement(c.a.Fragment,null,0===(null===(a=t.esDestacado)||void 0===a?void 0:a.length)?c.a.createElement(H.a,{onClick:function(){return function(e){var t=e.titulo,a=e._id;Gt({title:"Destacar Noticia",icon:c.a.createElement(Ht.a,null),content:'Destacar la noticia "'.concat(t,'"?'),okText:"Si",cancelText:"No",cancelType:"Dashed",centered:!0,onOk:function(){Qt(a),n(!0)},onCancel:function(){}})}(t)},type:"primary"},"Destacar Noticia"):c.a.createElement(H.a,{onClick:function(){return function(e){var t=e.titulo,a=e.esDestacado;Gt({title:"Eliminar Noticia Destacada",icon:c.a.createElement(ce.a,null),content:'Eliminar la noticia "'.concat(t,'" como destacada?'),okText:"Si",cancelText:"No",cancelType:"Dashed",centered:!0,onOk:function(){var e,t=null===a||void 0===a||null===(e=a[0])||void 0===e?void 0:e._id;Zt(t),n(!0)},onCancel:function(){}})}(t)},type:"danger"},"Quitar Noticia Destacada"))}})))};var Xt=function(){return c.a.createElement(l.a,null,c.a.createElement(q,null,c.a.createElement(s.d,null,c.a.createElement(s.b,{exact:!0,path:"/",component:Ue}),c.a.createElement(s.b,{exact:!0,path:"/signup",component:W}),c.a.createElement(s.b,{exact:!0,path:"/login",component:ae}),c.a.createElement(s.b,{exact:!0,path:"/profile",component:je}),c.a.createElement(s.b,{exact:!0,path:"/newNoticia",component:ut}),c.a.createElement(s.b,{exact:!0,path:"/editNoticia/:noticiaId",component:bt}),c.a.createElement(s.b,{exact:!0,path:"/listNoticias",component:Ot}),c.a.createElement(s.b,{exact:!0,path:"/noticia/:noticiaId",component:Vt}),c.a.createElement(s.b,{exact:!0,path:"/admin/aprobarNoticia",component:zt}),c.a.createElement(s.b,{exact:!0,path:"/admin/destacarNoticia",component:$t}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(461);o.a.render(c.a.createElement(L,null,c.a.createElement(Xt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[246,1,2]]]);
//# sourceMappingURL=main.1dc70e35.chunk.js.map