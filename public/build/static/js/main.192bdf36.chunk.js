(this.webpackJsonpclontomixclient=this.webpackJsonpclontomixclient||[]).push([[0],{240:function(e,t,a){e.exports=a(448)},312:function(e,t,a){},448:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),i=a(27),o=a.n(i),l=a(45),s=a(43),u=a(7),m=a.n(u),d=a(11),p=a(15),f=a(449),v=a(103),E=a(237),b=a(116),g=a(79),h=a(458),y=a(463),x=a(464),w=a(465),j=a(466),O=a(467),k=a(468),T=a(81),I=a.n(T);n="/",n+="auth";var S=I.a.create({withCredentials:!0,baseURL:n}),C=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.post("/signup",t).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.post("/login",t).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.get("/currentUser");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.get("/logout");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.post("/profile",t).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.post("/profileAvatar",{profilePicture:t}).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=Object(r.createContext)();function M(e){var t=e.children,a=Object(r.useState)(null),n=Object(p.a)(a,2),i=n[0],o=n[1],l=function(e){return o(e)};return Object(r.useEffect)((function(){function e(){return(e=Object(d.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:t=e.sent,a=t.data.user,l(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){i?console.log("loggeado ".concat(i)):console.log("Se logeo el user ".concat(i))}),[i]),c.a.createElement(Y.Provider,{value:{user:i,setCtxUser:l,clearCtxUser:function(){return o(null)}}},t)}var R,_=f.a.Header,L=f.a.Content,V=f.a.Footer,q=f.a.Sider,U=v.a.SubMenu,B=function(e){var t=e.children,a=Object(r.useState)(!1),n=Object(p.a)(a,2),i=(n[0],n[1],Object(r.useContext)(Y)),o=i.clearCtxUser,s=i.user,u=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:o(),E.b.success("Has cerrado tu sesion!");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(f.a,{style:{minHeight:"100vh"}},c.a.createElement(q,{style:{overflow:"auto",height:"100vh",position:"fixed",left:0}},c.a.createElement(v.a,{theme:"dark",defaultSelectedKeys:["1"],mode:"inline"},c.a.createElement(v.a.Item,{key:"1",icon:c.a.createElement(y.a,null)},c.a.createElement(l.b,{to:"/"},"Home")),!s&&c.a.createElement(v.a.Item,{key:"2",icon:c.a.createElement(x.a,null)},c.a.createElement(l.b,{to:"/signup"},"Signup")),!s&&c.a.createElement(v.a.Item,{key:"3",icon:c.a.createElement(w.a,null)},c.a.createElement(l.b,{to:"/login"},"Login")),s&&c.a.createElement(v.a.Item,{key:"4",icon:c.a.createElement(x.a,null)},c.a.createElement(l.b,{to:"/profile"},"Mi Perfil")),s&&c.a.createElement(v.a.Item,{key:"5",icon:c.a.createElement(j.a,null)},c.a.createElement(l.b,{to:"/",icon:c.a.createElement(j.a,null),onClick:u},"logout")),s&&("Editor"===s.roleType||"Admin"===s.roleType)&&c.a.createElement(U,{key:"sub1",icon:c.a.createElement(O.a,null),title:"User"},c.a.createElement(v.a.Item,{key:"101"},c.a.createElement(l.b,{to:"/listNoticias"},"Mis Noticias")),c.a.createElement(v.a.Item,{key:"100"},c.a.createElement(l.b,{to:"/newNoticia"},"Nueva Noticia")),c.a.createElement(v.a.Item,{key:"102"},"Alex")),s&&"Admin"===s.roleType&&c.a.createElement(U,{key:"sub2",icon:c.a.createElement(O.a,null),title:"Admin Menu"},c.a.createElement(v.a.Item,{key:"200"},c.a.createElement(l.b,{to:"/admin/aprobarNoticia"},"Aprobar Noticia")),c.a.createElement(v.a.Item,{key:"201"},c.a.createElement(l.b,{to:"/admin/destacarNoticia"},"Destacar Noticia"))),c.a.createElement(v.a.Item,{key:"9",icon:c.a.createElement(k.a,null)},c.a.createElement(l.b,{to:"/logout"},"Algo aqui")))),c.a.createElement(f.a,{className:"site-layout",style:{marginLeft:200}},c.a.createElement(_,{className:"site-layout-background",style:{padding:0,backgroundColor:"rgb(100,100,100,1)"}},c.a.createElement(b.a,{justify:"center",align:"middle"},c.a.createElement(g.a,null,c.a.createElement(h.a.Title,{level:1,style:{color:"White"}},"ClonTomix")))),c.a.createElement(L,{style:{margin:"24px 16px 0",overflow:"initial"}},c.a.createElement("div",{className:"site-layout-background",style:{padding:24,minHeight:360}},t)),c.a.createElement(V,{style:{textAlign:"center"}},"Clontomix \xa92020. Creado por D Zam, dise\xf1o de Ant D")))},H=(a(312),a(457)),z=a(461),K=a(46),G=h.a.Title,W={wrapperCol:{xs:{span:24,offset:0},sm:{span:12,offset:6}}},J=function(e){var t=H.a.useForm(),a=Object(p.a)(t,1)[0],n=Object(r.useState)(!1),i=Object(p.a)(n,2),o=i[0],l=i[1],s=Object(r.useState)(""),u=Object(p.a)(s,2),f=u[0],v=u[1],h=function(){var t=Object(d.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(!1),t.next=3,C(a);case 3:200===(n=t.sent).status?(E.b.success("Gracias por registrarse!"),e.history.push("/login")):(console.log(n),l(!0),v(n.message));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement(b.a,{justify:"center",gutter:24},c.a.createElement(g.a,W,c.a.createElement(G,{level:3},"Registro"))),c.a.createElement(H.a,{layout:"vertical",form:a,name:"register",onFinish:h,scrollToFirstError:!0},c.a.createElement(H.a.Item,{name:"username",label:"Nombre",rules:[{required:!0,message:"Favor de agregar un nombre de usuario",whitespace:!0}]},c.a.createElement(z.a,null)),c.a.createElement(H.a.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:"El email no es valido"},{required:!0,message:"Favor de agregar un email"}]},c.a.createElement(z.a,null)),c.a.createElement(H.a.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Favor de introducir un password"}],hasFeedback:!0},c.a.createElement(z.a.Password,null)),c.a.createElement(H.a.Item,{name:"confirmPassword",label:"Confirm Password",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Favor de confirmar su password"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject("Las password no coinciden"):Promise.resolve()}}}]},c.a.createElement(z.a.Password,null)),c.a.createElement(b.a,{justify:"center"},c.a.createElement(g.a,W,o&&c.a.createElement(G,{level:5,type:"warning"},f))),c.a.createElement(H.a.Item,W,c.a.createElement(K.a,{type:"primary",htmlType:"submit",block:!0,style:{marginTop:"30px"}},"Register"))))},Q=a(450),Z=a(469),$=a(470),X=a(471),ee=h.a.Title;R="/";var te,ae={wrapperCol:{xs:{span:24,offset:0},sm:{span:12,offset:6}}},ne=function(e){var t=H.a.useForm(),a=Object(p.a)(t,1)[0],n=Object(r.useState)(!1),i=Object(p.a)(n,2),o=i[0],l=i[1],s=Object(r.useState)(""),u=Object(p.a)(s,2),f=u[0],v=u[1],h=Object(r.useContext)(Y).setCtxUser,y=function(){var t=Object(d.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(!1),t.next=3,N(a);case 3:200===(n=t.sent).status?(n.data.password="",h(n.data),r=n.data.username,E.b.success("Gracias por entrar ".concat(r)),e.history.push("/")):(console.log(n),l(!0),v(n.message));case 5:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}();return c.a.createElement("div",null,c.a.createElement(H.a,{name:"normal_login",form:a,layout:"vertical",className:"login-form",initialValues:{remember:!0},onFinish:y},c.a.createElement(H.a.Item,{name:"email",label:"Email",rules:[{type:"email",message:"El email no es valido"},{required:!0,message:"Favor de introducir su email"}]},c.a.createElement(z.a,{prefix:c.a.createElement(Z.a,{className:"site-form-item-icon"}),placeholder:"usuario@clontomix.com"})),c.a.createElement(H.a.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Favor de introducir su password!"}]},c.a.createElement(z.a,{prefix:c.a.createElement($.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password..."})),c.a.createElement(b.a,{justify:"center"},c.a.createElement(g.a,ae,o&&c.a.createElement(ee,{level:5,type:"warning"},f))),c.a.createElement(H.a.Item,ae,c.a.createElement(K.a,{type:"primary",htmlType:"submit",className:"login-form-button",block:!0,style:{marginTop:"30px"}},"Log in"))),c.a.createElement(Q.a,null,"Or"),c.a.createElement(b.a,null,c.a.createElement(g.a,{xs:24,sm:{span:12,offset:6}},c.a.createElement("a",{style:{color:"white",textDecoration:"none !important"},href:"".concat(R,"auth/google")},c.a.createElement(K.a,{danger:!0,type:"primary",block:!0,style:{marginTop:"20px"}},c.a.createElement(X.a,null),"Login con Google")))))},re=a(453),ce=a(459),ie=a(472);te="/",te+="api/comentario";var oe,le=I.a.create({withCredentials:!0,baseURL:te}),se=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.get("/").catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=Object(d.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.post("/".concat(t),a).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),me=function(){var e=Object(d.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.put("/".concat(t),a).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),de=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.delete("/".concat(t)).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=a(58),fe=z.a.TextArea,ve=h.a.Title,Ee=function(){return E.b.success("Se edito el comentario satisfactoriamente")},be=Object(r.forwardRef)((function(e,t){var a=e.comment,n=a._id,i=a.comentario,o=a.idNoticia.titulo,l=e.closeModal,s=e.changeData,u=H.a.useForm(),f=Object(p.a)(u,1)[0],v=Object(r.useState)(!1),E=Object(p.a)(v,2),h=E[0],y=E[1],x=Object(r.useState)(""),w=Object(p.a)(x,2),j=w[0],O=w[1];function k(){return(k=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!1),e.next=3,me(n,t);case 3:201===(a=e.sent).status||200===a.status?(Ee(),l(!1),s(!0)):(console.log(a),y(!0),O(a.message));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useImperativeHandle)(t,(function(){return{showAlert:function(){f.submit()}}})),Object(r.useEffect)((function(){return function(){console.log("dismount"),f.resetFields(["comentario"])}}),[n]),c.a.createElement(c.a.Fragment,null,c.a.createElement(H.a,{layout:"vertical",form:f,onFinish:function(e){return k.apply(this,arguments)}},c.a.createElement(H.a.Item,{name:"comentario",label:"Edita el comentario de la noticia ".concat(o),initialValue:i,rules:[{min:10,message:"Favor de escribir mas de 10 caracteres"},{required:!0,message:"Favor de escribir un comentario",whitespace:!0}]},c.a.createElement(fe,{allowClear:!0,rows:8})),c.a.createElement(b.a,{justify:"center"},c.a.createElement(g.a,{xs:24,sm:12},h&&c.a.createElement(ve,{level:5,type:"warning"},j)))))})),ge=h.a.Title,he=re.a.Column,ye=ce.a.confirm,xe=z.a.TextArea,we=function(){return E.b.success("Se actualizo los datos satisfactoriamente")},je={wrapperCol:{xs:{span:24,offset:0},sm:{span:12,offset:6}}},Oe=function(){var e,t=H.a.useForm(),a=Object(p.a)(t,1)[0],n=Object(r.useState)(!1),i=Object(p.a)(n,2),o=i[0],l=i[1],s=Object(r.useState)(""),u=Object(p.a)(s,2),f=u[0],v=u[1],E=Object(r.useState)(!1),h=Object(p.a)(E,2),y=h[0],x=h[1],w=Object(r.useState)(!1),j=Object(p.a)(w,2),O=j[0],k=j[1],T=Object(r.useState)(!1),S=Object(p.a)(T,2),C=S[0],N=S[1],A=Object(r.useContext)(Y),M=A.setCtxUser,R=A.user,_=Object(r.useState)(null),L=Object(p.a)(_,2),V=L[0],q=L[1],U=Object(r.useState)(!1),B=Object(p.a)(U,2),G=B[0],W=B[1],J=Object(r.useState)({}),Z=Object(p.a)(J,2),$=Z[0],X=Z[1],ee=Object(r.useRef)(),te=function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:if(201!==(a=e.sent).status&&200!==a.status){e.next=13;break}return we(),e.next=7,F();case 7:n=e.sent,r=n.data.user,M(r),x(!0),e.next=16;break;case 13:console.log(a),l(!0),v(a.message);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n,r,c,i,o,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files,(n=new FormData).append("file",a[0]),n.append("upload_preset","ma1cews4"),e.next=6,I.a.post("https://api.cloudinary.com/v1_1/dsrw38rwx/image/upload",n);case 6:return r=e.sent,c=r.data.secure_url,e.next=10,D(c);case 10:if(201!==(i=e.sent).status&&200!==i.status){e.next=21;break}return we(),e.next=15,F();case 15:o=e.sent,s=o.data.user,M(s),k(!0),e.next=24;break;case 21:console.log(i),l(!0),v(i.message);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){function e(){return(e=Object(d.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se();case 2:t=e.sent,a=t.data.comentariosPorUser,q(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),N(!1),k(!1),x(!1)}),[y,O,C]),R?c.a.createElement("div",null,c.a.createElement(b.a,{gutter:24},c.a.createElement(g.a,je,c.a.createElement(ge,{level:2},"Mi Perfil"))),c.a.createElement(b.a,null,c.a.createElement(g.a,{xs:12},c.a.createElement(H.a,{layout:"vertical",form:a,onFinish:te},c.a.createElement(H.a.Item,{name:"facebook",label:"Facebook Link",initialValue:null===R||void 0===R?void 0:R.facebook},c.a.createElement(z.a,null)),c.a.createElement(H.a.Item,{name:"twitter",label:"Twitter Link",initialValue:null===R||void 0===R?void 0:R.twitter},c.a.createElement(z.a,null)),c.a.createElement(H.a.Item,{name:"acercaDe",label:"Acerca de ti",initialValue:null===R||void 0===R?void 0:R.acercaDe},c.a.createElement(xe,{allowClear:!0,rows:4})),c.a.createElement(b.a,{justify:"center"},c.a.createElement(g.a,{xs:24},o&&c.a.createElement(ge,{level:5,type:"warning"},f))),c.a.createElement(H.a.Item,je,c.a.createElement(K.a,{type:"primary",htmlType:"submit",block:!0,style:{marginTop:"30px"}},"Actualizar Datos")))),c.a.createElement(g.a,{xs:12},c.a.createElement(b.a,{justify:"center",align:"middle",style:{marginBottom:"40px"}},c.a.createElement("img",{style:{objectFit:"cover",width:"300px",height:"300px",borderRadius:"200px"},alt:"perfil",src:null===R||void 0===R?void 0:R.profilePicture})),c.a.createElement(b.a,{justify:"center",align:"middle"},c.a.createElement("input",{type:"file",id:"file",onChange:ae}),c.a.createElement("label",{htmlFor:"file"},"Upload")))),c.a.createElement(Q.a,null),c.a.createElement(b.a,{justify:"center",gutter:24},c.a.createElement(g.a,je,c.a.createElement(ge,{level:3},"Mis comentarios "))),c.a.createElement(re.a,{key:"comentarios",rowKey:function(e){return e._id},dataSource:V},c.a.createElement(he,{title:"Titulo de la Noticia",dataIndex:"idNoticia.titulo",key:"idNoticia.titulo",render:function(e,t){return t.idNoticia.titulo}}),c.a.createElement(he,{title:"Comentario",dataIndex:"comentario",key:"comentario"}),c.a.createElement(he,{title:"Fecha",dataIndex:"createdAt",key:"createdAt",render:function(e,t){return pe.DateTime.fromISO(t.createdAt).toLocaleString(pe.DateTime.DATETIME_SHORT)}}),c.a.createElement(he,{title:"Editar Comentario",key:"Editar",render:function(e,t){return c.a.createElement(c.a.Fragment,null,c.a.createElement(K.a,{onClick:function(){W(!0),X(t)},type:"primary"},"Editar"))}}),c.a.createElement(he,{title:"Borrar Comentario",key:"Borrar",render:function(e,t){return c.a.createElement(c.a.Fragment,null,c.a.createElement(K.a,{onClick:function(){return function(e){var t=e.idNoticia.titulo,a=e._id;ye({title:"Eliminar Comentario",icon:c.a.createElement(ie.a,null),content:"Desea eliminar el comentario en la noticia ".concat(t,'"?'),okText:"Si",okType:"Primary",cancelText:"No",centered:!0,onOk:function(){return Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de(a);case 2:N(!0);case 3:case"end":return e.stop()}}),e)})))()},onCancel:function(){}})}(t)},type:"danger"},"Borrar"))}})),c.a.createElement(ce.a,{centered:!0,title:"Agrega Comentario a "+(null===$||void 0===$||null===(e=$.idNoticia)||void 0===e?void 0:e.titulo),visible:G,onCancel:function(){return W(!1)},onOk:function(){ee.current.showAlert()},okType:"primary",width:700},c.a.createElement(be,{ref:ee,comment:$,closeModal:W,changeData:N}))):c.a.createElement("div",null)},ke=a(233),Te=a(456),Ie=a(222),Se=a.n(Ie),Ce=h.a.Title,Ne=h.a.Text,Fe=function(e){var t,a=e.news;return c.a.createElement(c.a.Fragment,null,c.a.createElement(g.a,{sm:24,md:{span:16,offset:4}},c.a.createElement(Te.a,{style:{marginBottom:"30px",minHeight:"400px"},title:c.a.createElement(Ce,{level:3},a.titulo),bordered:!1,cover:"Imagen"===a.tipoPresentacion?c.a.createElement("center",null,c.a.createElement("img",{style:{marginTop:"30px"},alt:"example",src:null===(t=a.imgArray)||void 0===t?void 0:t[0]})):c.a.createElement("center",null,c.a.createElement(Se.a,{url:"https://youtu.be/n25nqibaIDg",style:{marginTop:"30px"},light:!0}))},c.a.createElement(b.a,{gutter:[0,50]},c.a.createElement(g.a,null,a.contenido.length>500?a.contenido.substring(0,497).concat("..."):a.contenido)),c.a.createElement(Q.a,null),c.a.createElement(b.a,null,c.a.createElement(g.a,{span:12},c.a.createElement(Ne,{strong:!0},"Autor:")," ",a.idUser.username),c.a.createElement(g.a,{span:12},c.a.createElement(Ne,{strong:!0},"Fecha de Publicacion:")," ",pe.DateTime.fromISO(a.fechaParaPublicacion).toLocaleString())),c.a.createElement(b.a,null,c.a.createElement(g.a,{span:12},c.a.createElement(Ne,{strong:!0},a.idComentarios.length)," comentario(s)"),c.a.createElement(g.a,{span:12},c.a.createElement(Ne,{strong:!0},"Tipo de Noticia:")," ",a.tipoNoticia)),c.a.createElement(b.a,{gutter:20},c.a.createElement(g.a,{justify:"center",align:"middle",style:{marginTop:"20px"},span:24},c.a.createElement(Ce,{level:3},c.a.createElement(l.b,{to:"/noticia/".concat(a._id)},"Ir a leer la noticia")))))))},Ae=a(451);oe="/",oe+="api/destacado";var Pe,De=I.a.create({withCredentials:!0,baseURL:oe}),Ye=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De.get("/").catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Me=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De.post("/",{idNoticia:t}).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Re=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De.delete("/".concat(t)).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_e=function(){var e=Object(r.useState)([]),t=Object(p.a)(e,2),a=t[0],n=t[1],i=Object(r.useState)(!0),o=Object(p.a)(i,2),l=o[0],s=o[1];Object(r.useEffect)((function(){function e(){return(e=Object(d.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye();case 2:t=e.sent,a=t.data,n(a),s(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){}}),[]);var u={height:"160px",color:"#fff",lineHeight:"160px",textAlign:"center",backgroundImage:'url("https://i.pinimg.com/originals/2d/6d/39/2d6d3954cab6327de170f05c266cac36.png")',objectPosition:"center",objectFit:"cover"};return l?c.a.createElement(c.a.Fragment,null,"Loading"):(l||a)&&!l&&a?c.a.createElement(Ae.a,{autoplay:!0},null===a||void 0===a?void 0:a.map((function(e){return c.a.createElement("div",{name:"Hola",key:e._id},c.a.createElement("h3",{style:u},e.idNoticia.titulo))}))):c.a.createElement(c.a.Fragment,null)},Le=h.a.Title,Ve=function(e){return fetch(e).then((function(e){return e.json()}))};Pe="/",console.log(Pe);var qe=function(){var e,t,a=Object(ke.a)((function(e,t){return t&&0===t.length?null:"".concat(Pe,"api/noticia/pagination?page=").concat(e)}),Ve),n=a.data,r=a.error,i=(a.mutate,a.size),o=a.setSize,l=(a.isValidating,n?n.map((function(e){return e.noticias})):[]),s=!n&&!r||i>0&&n&&"undefined"===typeof n[i-1],u=0===(null===n||void 0===n||null===(e=n[0])||void 0===e?void 0:e.length)||n&&(null===n||void 0===n?void 0:n.length)<10;return console.log(l),n?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,c.a.createElement(b.a,{justify:"center"},c.a.createElement(g.a,{sm:24,md:{span:16}},c.a.createElement(_e,null)))),c.a.createElement(Q.a,null),c.a.createElement("div",null,c.a.createElement(b.a,{justify:"center",gutter:30},c.a.createElement(g.a,null,c.a.createElement(Le,{level:1},"Noticias:"))),null===l||void 0===l||null===(t=l.flat())||void 0===t?void 0:t.map((function(e){return c.a.createElement(Fe,{key:e._id,news:e})}))),c.a.createElement("div",null,c.a.createElement("button",{disabled:s||u,onClick:function(){return o(i+1)}},s?"loading...":u?"no more issues":"load more"))):c.a.createElement("p",null,"Loading...")},Ue=a(67),Be=a(131),He=a(454),ze=a(455);var Ke,Ge=function(e){var t=e.setPhotos,a=e.setArrayPhotos,n=Object(r.useState)({previewVisible:!1,previewImage:"",previewTitle:"",fileList:[],uploaded:[]}),i=Object(p.a)(n,2),o=i[0],l=i[1];function s(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))}var u=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,s(t.originFileObj);case 3:t.preview=e.sent;case 4:l(Object(Ue.a)(Object(Ue.a)({},o),{},{previewImage:t.url||t.preview,previewVisible:!0,previewTitle:t.name||t.url.substring(t.url.lastIndexOf("/")+1)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function f(){return(f=Object(d.a)(m.a.mark((function e(a){var n,r,c,i,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.file,r=a.onSuccess,e.prev=1,(c=new FormData).append("file",n),c.append("upload_preset","ma1cews4"),e.next=7,fetch("https://api.cloudinary.com/v1_1/dsrw38rwx/image/upload",{method:"POST",body:c});case 7:return i=e.sent,e.next=10,i.json();case 10:o=e.sent,t(o.secure_url),r(o,n),e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(1),e.t0;case 18:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}var v=o.previewVisible,E=o.previewImage,b=o.fileList,g=o.previewTitle,h=c.a.createElement("div",null,c.a.createElement("div",{className:"ant-upload-text"},"Upload photo"));return c.a.createElement("div",{className:"clearfix"},c.a.createElement(ze.a,{listType:"picture-card",fileList:b,onPreview:u,onChange:function(e){var t=e.fileList;l(Object(Ue.a)(Object(Ue.a)({},o),{},{fileList:t}));var n=[];0!==t.length?(t.forEach((function(e,t){var a;n.push(null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.secure_url)})),a(n)):a(n)},customRequest:function(e){return f.apply(this,arguments)}},b.length>=8?null:h),c.a.createElement(ce.a,{visible:v,title:g,footer:null,onCancel:function(){return l(Object(Ue.a)(Object(Ue.a)({},o),{},{previewVisible:!1}))}},c.a.createElement("img",{alt:"example",style:{width:"100%"},src:E})))};Ke="/",Ke+="api/noticia";var We=I.a.create({withCredentials:!0,baseURL:Ke}),Je=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.get("/user/".concat(t)).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.post("/",t).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ze=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.get("/detail/".concat(t)).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$e=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.put("/edit/".concat(t.noticiaId),t).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xe=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.delete("/delete/".concat(t)).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),et=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.get("/notApproved").catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),tt=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.put("/approved/".concat(t)).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),at=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.get("/noticiasDestacadas").catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),nt=a(52),rt=a.n(nt),ct=z.a.TextArea,it=Be.a.Option,ot=h.a.Title,lt=rt()().format("DD/MM/YYYY"),st={wrapperCol:{xs:{span:24,offset:0},sm:{span:12,offset:6}}},ut=function(e){var t=H.a.useForm(),a=Object(p.a)(t,1)[0],n=Object(r.useState)(!1),i=Object(p.a)(n,2),o=i[0],l=i[1],s=Object(r.useState)(""),u=Object(p.a)(s,2),f=u[0],v=u[1],h=Object(r.useState)(!1),y=Object(p.a)(h,2),x=y[0],w=y[1],j=Object(r.useState)([]),O=Object(p.a)(j,2),k=O[0],T=O[1],I=Object(r.useState)(""),S=Object(p.a)(I,2),C=(S[0],S[1]),N=function(){var t=Object(d.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l(!1),0!==k.length||"Imagen"!==a.tipoPresentacion){t.next=5;break}return l(!0),v("Es necesario agregar imagenes"),t.abrupt("return",!1);case 5:return t.next=7,Qe(Object(Ue.a)(Object(Ue.a)({},a),{},{imgArray:k}));case 7:200===(n=t.sent).status||201===n.status?(E.b.success("Se agrego la noticia satisfactoriamente"),e.history.push("/")):(console.log(n),l(!0),v(n.message));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return c.a.createElement("div",null,c.a.createElement(b.a,{justify:"center",gutter:16},c.a.createElement(g.a,st,c.a.createElement(ot,{level:2},"Agregar Noticia"))),c.a.createElement(H.a,{layout:"vertical",form:a,name:"register",onFinish:N,scrollToFirstError:!0},c.a.createElement(H.a.Item,{name:"titulo",label:"Titulo de la Noticia",rules:[{required:!0,message:"Favor de agregar un titulo",whitespace:!0}]},c.a.createElement(z.a,null)),c.a.createElement(H.a.Item,{name:"contenido",label:"Contenido de la Noticia",rules:[{required:!0,message:"Es necesario agregar contenido a la noticia",whitespace:!0}]},c.a.createElement(ct,null)),c.a.createElement(H.a.Item,{name:"fechaParaPublicacion",label:"Cuando se publica la noticia"},c.a.createElement(He.a,{placeholder:"Elige Fecha",defaultValue:rt()(lt,"DD/MM/YYYY"),format:"DD/MM/YYYY"})),c.a.createElement(H.a.Item,{name:"tipoNoticia",label:"Tipo de Noticia",initialValue:"Editorial",rules:[{required:!0,message:"Es necesario escoger un tipo"}]},c.a.createElement(Be.a,null,c.a.createElement(it,{value:"Editorial"},"Editorial"),c.a.createElement(it,{value:"Rumor"},"Rumor"),c.a.createElement(it,{value:"Review"},"Review "))),c.a.createElement(H.a.Item,{name:"tipoPresentacion",label:"Tipo de Portada (Imagen o Video)",initialValue:"Imagen",rules:[{required:!0,message:"Es necesario escoger un tipo de presentacion"}]},c.a.createElement(Be.a,{onChange:function(){w(!x),console.log(x)}},c.a.createElement(it,{value:"Imagen"},"Imagen"),c.a.createElement(it,{value:"Video"},"Video"))),c.a.createElement(H.a.Item,{name:"ytLink",label:"Link de Video Youtube",hidden:!x,rules:[{required:!!x,message:"Favor de agregar un link",whitespace:!0}]},c.a.createElement(z.a,null)),c.a.createElement(H.a.Item,{name:"Imagenes",label:"Imagenes",hidden:x},c.a.createElement(Ge,{setArrayPhotos:T,setPhotos:C})),c.a.createElement(b.a,{justify:"center"},c.a.createElement(g.a,st,o&&c.a.createElement(ot,{level:5,type:"warning"},f))),c.a.createElement(H.a.Item,st,c.a.createElement(K.a,{type:"primary",htmlType:"submit",block:!0,style:{marginTop:"30px"}},"A\xf1adir Noticia"))))},mt=z.a.TextArea,dt=Be.a.Option,pt=h.a.Title,ft=h.a.Text,vt=(rt()().format("DD/MM/YYYY"),{wrapperCol:{xs:{span:24,offset:0},sm:{span:12,offset:6}}}),Et=function(e){var t=H.a.useForm(),a=Object(p.a)(t,1)[0],n=Object(r.useState)(!1),i=Object(p.a)(n,2),o=i[0],l=i[1],s=Object(r.useState)(""),u=Object(p.a)(s,2),f=u[0],v=u[1],h=Object(r.useState)(null),y=Object(p.a)(h,2),x=y[0],w=y[1],j=e.match.params.noticiaId,O=function(){var t=Object(d.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(!1),t.next=3,$e(Object(Ue.a)(Object(Ue.a)({},a),{},{noticiaId:j}));case 3:201===(n=t.sent).status?(E.b.success("Se edito la noticia satisfactoriamente"),e.history.push("/listNoticias")):(console.log(n),l(!0),v(n.message));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){function e(){return(e=Object(d.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze(j);case 2:t=e.sent,a=t.data,console.log(a.fechaParaPublicacion),w(a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),x?c.a.createElement("div",null,c.a.createElement(b.a,{justify:"center",gutter:16},c.a.createElement(g.a,vt,c.a.createElement(pt,{level:2},"Editar Noticia"))),!x.noticiaAprobada&&c.a.createElement(b.a,{justify:"center",gutter:16},c.a.createElement(g.a,vt,c.a.createElement(ft,{level:2,type:"danger"},"Esta noticia aun no ha sido aprobada"))),c.a.createElement(H.a,{layout:"vertical",form:a,name:"register",onFinish:O,scrollToFirstError:!0},c.a.createElement(H.a.Item,{name:"titulo",label:"Titulo de la Noticia",initialValue:x.titulo,rules:[{required:!0,message:"Favor de agregar un titulo",whitespace:!0}]},c.a.createElement(z.a,null)),c.a.createElement(H.a.Item,{name:"contenido",label:"Contenido de la Noticia",initialValue:x.contenido,rules:[{required:!0,message:"Es necesario agregar contenido a la noticia",whitespace:!0}]},c.a.createElement(mt,null)),c.a.createElement(H.a.Item,{name:"fechaParaPublicacion",label:"Cuando se publica la noticia",initialValue:rt()(rt()(x.fechaParaPublicacion).format("DD/MM/YYYY"),"DD/MM/YYYY")},c.a.createElement(He.a,{placeholder:"Elige Fecha",format:"DD/MM/YYYY"})),c.a.createElement(H.a.Item,{name:"tipoNoticia",label:"Tipo de Noticia",initialValue:x.tipoNoticia,rules:[{required:!0,message:"Es necesario escoger un tipo"}]},c.a.createElement(Be.a,null,c.a.createElement(dt,{value:"Editorial"},"Editorial"),c.a.createElement(dt,{value:"Rumor"},"Rumor"),c.a.createElement(dt,{value:"Review"},"Review "))),c.a.createElement(b.a,{justify:"center"},c.a.createElement(g.a,vt,o&&c.a.createElement(pt,{level:5,type:"warning"},f))),c.a.createElement(H.a.Item,vt,c.a.createElement(K.a,{type:"primary",htmlType:"submit",block:!0,style:{marginTop:"30px"}},"Editar Noticia")))):c.a.createElement("div",null,"Estoy cargando")},bt=a(462),gt=re.a.Column,ht=ce.a.confirm,yt=h.a.Title,xt={wrapperCol:{xs:{span:24,offset:0},sm:{span:12,offset:6}}};function wt(){return(wt=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe(t);case 2:200===(a=e.sent).status?alert("Todo bien"):console.log(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var jt=function(){var e=Object(r.useState)(!1),t=Object(p.a)(e,2),a=t[0],n=t[1],i=Object(r.useState)([]),o=Object(p.a)(i,2),s=o[0],u=o[1],f=Object(r.useContext)(Y).user;function v(e){var t=e.titulo,a=e._id;ht({title:"Borrar Noticia",icon:c.a.createElement(ie.a,null),content:"En verdad deseas eliminar la noticia: ".concat(t),okText:"Si",okType:"danger",cancelText:"No",onOk:function(){!function(e){wt.apply(this,arguments)}(a),n(!0)},onCancel:function(){}})}return Object(r.useEffect)((function(){function e(){return(e=Object(d.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je(null===f||void 0===f?void 0:f._id);case 2:t=e.sent,a=t.data,u(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),n(!1)}),[a,f]),c.a.createElement("div",null,c.a.createElement(b.a,{justify:"center",gutter:24},c.a.createElement(g.a,xt,c.a.createElement(yt,{level:3},"Mis noticias publicadas"))),s?c.a.createElement(re.a,{key:"x",rowKey:function(e){return e._id},dataSource:s},c.a.createElement(gt,{title:"Titulo de la Noticia",dataIndex:"titulo",key:"titulo"}),c.a.createElement(gt,{title:"Aprobada",dataIndex:"noticiaAprobada",key:"noticiaAprobada",render:function(e,t){return t.noticiaAprobada?"Si":"no"}}),c.a.createElement(gt,{title:"Fecha para Publicar",dataIndex:"fechaParaPublicacion",key:"fechaParaPublicacion",render:function(e,t){return rt()(t.fechaParaPublicacion).format("DD/MM/YYYY")}}),c.a.createElement(gt,{title:"Editar",key:"editar",render:function(e,t){return c.a.createElement(bt.b,{size:"middle"},c.a.createElement(K.a,{type:"primary"},c.a.createElement(l.b,{to:"/editNoticia/".concat(t._id)},"Editar Noticia")))}}),c.a.createElement(gt,{title:"Borrar",key:"Borrar",render:function(e,t){return c.a.createElement(bt.b,{size:"middle"},c.a.createElement(K.a,{onClick:function(){return v(t)},danger:!0,type:"dashed"},"Borrar Noticia"))}})):c.a.createElement("h1",null,"Hola"))},Ot=z.a.TextArea,kt=h.a.Title,Tt=function(){return E.b.success("Se agrego el comentario satisfactoriamente")},It=Object(r.forwardRef)((function(e,t){var a=e.noticiaId,n=e.titulo,i=e.closeModal,o=e.addedComment,l=H.a.useForm(),s=Object(p.a)(l,1)[0],u=Object(r.useState)(!1),f=Object(p.a)(u,2),v=f[0],E=f[1],h=Object(r.useState)(""),y=Object(p.a)(h,2),x=y[0],w=y[1];function j(){return(j=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!1),e.next=3,ue(a,t);case 3:201===(n=e.sent).status||200===n.status?(Tt(),i(!1),o(!0)):(console.log(n),E(!0),w(n.message));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useImperativeHandle)(t,(function(){return{showAlert:function(){s.submit()}}})),Object(r.useEffect)((function(){return function(){console.log("dismount"),s.resetFields(["comentario"])}})),c.a.createElement(c.a.Fragment,null,c.a.createElement(H.a,{layout:"vertical",form:s,onFinish:function(e){return j.apply(this,arguments)}},c.a.createElement(H.a.Item,{name:"comentario",label:"Agrega un comentario a ".concat(n),rules:[{min:10,message:"Favor de escribir mas de 10 caracteres"},{required:!0,message:"Favor de escribir un comentario",whitespace:!0}]},c.a.createElement(Ot,{allowClear:!0,rows:8})),c.a.createElement(b.a,{justify:"center"},c.a.createElement(g.a,{xs:24,sm:12},v&&c.a.createElement(kt,{level:5,type:"warning"},x)))))})),St=h.a.Title,Ct=h.a.Text,Nt=function(e){var t=e.news;return c.a.createElement(c.a.Fragment,null,c.a.createElement(g.a,{sm:24,md:{span:16,offset:4}},c.a.createElement(Te.a,{style:{marginBottom:"30px",borderRadius:"10px"},title:c.a.createElement(St,{level:2},t.titulo),bordered:!1,cover:c.a.createElement("div",null,"Imagen")},c.a.createElement(b.a,{gutter:[0,50]},c.a.createElement(g.a,null,c.a.createElement("p",{style:{fontSize:"16px"}},t.contenido))),c.a.createElement(Q.a,null),c.a.createElement(b.a,null,c.a.createElement(g.a,{span:12},c.a.createElement(Ct,{strong:!0},"Autor:")," ",t.idUser.username),c.a.createElement(g.a,{span:12},c.a.createElement(Ct,{strong:!0},"Fecha de Publicacion:")," ",pe.DateTime.fromISO(t.fechaParaPublicacion).toLocaleString())),c.a.createElement(b.a,null,c.a.createElement(g.a,{span:12},c.a.createElement(Ct,{strong:!0},t.idComentarios.length)," comentario(s)"),c.a.createElement(g.a,{span:12},c.a.createElement(Ct,{strong:!0},"Tipo de Noticia:")," ",t.tipoNoticia)))))},Ft=a(452),At=a(460),Pt=a(76),Dt=function(e){var t=e.values;return c.a.createElement(g.a,{sm:24,md:{span:16,offset:4}},c.a.createElement(Ft.a,{style:{border:"1px solid black",borderRadius:"20px",padding:"20px",background:"white",marginBottom:"20px"},author:c.a.createElement("span",{style:{fontSize:"16px"}},t.idUser.username),avatar:c.a.createElement(At.a,{className:"extra",shape:"square",size:64,src:t.idUser.profilePicture,alt:t.idUser.username}),content:c.a.createElement("p",{style:{fontSize:"16px"}},t.comentario),datetime:c.a.createElement(Pt.a,{title:pe.DateTime.fromISO(t.createdAt).toLocaleString(pe.DateTime.DATETIME_SHORT)},c.a.createElement("span",null,pe.DateTime.local().toRelative({base:pe.DateTime.fromISO(t.createdAt)})))}))},Yt=h.a.Title,Mt=function(e){var t,a=e.match.params.noticiaId,n=Object(r.useState)(null),i=Object(p.a)(n,2),o=i[0],l=i[1],s=Object(r.useState)(!1),u=Object(p.a)(s,2),f=u[0],v=u[1],E=Object(r.useState)(!1),h=Object(p.a)(E,2),y=h[0],x=h[1],w=Object(r.useRef)();return Object(r.useEffect)((function(){function e(){return(e=Object(d.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze(a);case 2:t=e.sent,n=t.data,l(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),x(!1)}),[y]),o&&o.noticiaAprobada?c.a.createElement(c.a.Fragment,null,c.a.createElement(Nt,{news:o}),c.a.createElement(b.a,{gutter:[16,16]},c.a.createElement(g.a,{sm:24,md:{span:16,offset:4}},c.a.createElement(Q.a,null))),c.a.createElement(b.a,{gutter:[16,16]},c.a.createElement(g.a,{sm:24,md:{span:16,offset:4}},c.a.createElement(K.a,{block:!0,type:"primary",onClick:function(){return v(!0)}},"Agrega un Comentario"),c.a.createElement(ce.a,{centered:!0,title:"Agrega Comentario a "+o.titulo,visible:f,onCancel:function(){return v(!1)},onOk:function(){w.current.showAlert()},width:700},c.a.createElement(It,{ref:w,noticiaId:o._id,titulo:o.titulo,closeModal:v,addedComment:x})))),c.a.createElement(b.a,{gutter:[16,16]},c.a.createElement(g.a,{sm:24,md:{span:16,offset:4}},c.a.createElement(Q.a,null))),c.a.createElement(b.a,{gutter:[16,16]},c.a.createElement(g.a,{sm:24,md:{span:16,offset:4}},c.a.createElement(Yt,{level:4},"Comentarios"))),null===(t=o.idComentarios.flat())||void 0===t?void 0:t.map((function(e){return c.a.createElement(Dt,{key:e._id,values:e})}))):o&&!o.noticiaAprobada?c.a.createElement(c.a.Fragment,null,c.a.createElement(b.a,{gutter:[16,16]},c.a.createElement(g.a,{xs:24},c.a.createElement("h1",null,"Esta noticia se esta cocinando...")))):c.a.createElement("h1",null,"Esta noticia se esta preparando...")},Rt=re.a.Column,_t=ce.a.confirm,Lt=h.a.Title,Vt={wrapperCol:{xs:{span:24,offset:0},sm:{span:12,offset:6}}},qt=function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt(t);case 2:200===(a=e.sent).status?E.b.success("Se aprobo la noticia satisfactoriamente"):console.log(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ut=function(){var e=Object(r.useState)(!1),t=Object(p.a)(e,2),a=t[0],n=t[1],i=Object(r.useState)([]),o=Object(p.a)(i,2),l=o[0],u=o[1],f=Object(r.useContext)(Y).user;return Object(r.useEffect)((function(){function e(){return(e=Object(d.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et();case 2:t=e.sent,a=t.data.noticiasNotApproved,u(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),n(!1)}),[a,f]),!f||f&&"Admin"!==f.roleType?c.a.createElement(s.a,{to:"/"}):c.a.createElement("div",null,c.a.createElement(b.a,{justify:"center",gutter:24},c.a.createElement(g.a,Vt,c.a.createElement(Lt,{level:3},"Mis noticias publicadas"))),c.a.createElement(re.a,{key:"x",rowKey:function(e){return e._id},dataSource:l},c.a.createElement(Rt,{title:"Titulo de la Noticia",dataIndex:"titulo",key:"titulo"}),c.a.createElement(Rt,{title:"Fecha para Publicar",dataIndex:"fechaParaPublicacion",key:"fechaParaPublicacion",render:function(e,t){return pe.DateTime.fromISO(t.fechaParaPublicacion).toLocaleString()}}),c.a.createElement(Rt,{title:"Aprobar",key:"Aprobar",render:function(e,t){return c.a.createElement(bt.b,{size:"middle"},c.a.createElement(K.a,{onClick:function(){return function(e){var t=e.titulo,a=e._id;_t({title:"Aprobar Noticia",icon:c.a.createElement(ie.a,null),content:'Aprobar la noticia "'.concat(t,'" para su publicacion?'),okText:"Si",cancelText:"No",cancelType:"Dashed",centered:!0,onOk:function(){qt(a),n(!0)},onCancel:function(){}})}(t)},primary:!0,type:"dashed"},"Aprobar Noticia"))}})))},Bt=a(473),Ht=re.a.Column,zt=ce.a.confirm,Kt=h.a.Title,Gt={wrapperCol:{xs:{span:24,offset:0},sm:{span:12,offset:6}}},Wt=function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me(t);case 2:200===(a=e.sent).status?E.b.success("Se agrego una noticia como destacada"):console.log(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Jt=function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re(t);case 2:200===(a=e.sent).status?E.b.success("Se elimino la noticia como destacada"):console.log(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qt=function(){var e=Object(r.useState)(!1),t=Object(p.a)(e,2),a=t[0],n=t[1],i=Object(r.useState)([]),o=Object(p.a)(i,2),l=o[0],u=o[1],f=Object(r.useContext)(Y).user;return Object(r.useEffect)((function(){function e(){return(e=Object(d.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at();case 2:t=e.sent,a=t.data,u(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),n(!1)}),[a,f]),!f||f&&"Admin"!==f.roleType?c.a.createElement(s.a,{to:"/"}):c.a.createElement("div",null,c.a.createElement(b.a,{justify:"center",gutter:24},c.a.createElement(g.a,Gt,c.a.createElement(Kt,{level:3},"Mis noticias publicadas"))),c.a.createElement(re.a,{key:"x",rowKey:function(e){return e._id},dataSource:l},c.a.createElement(Ht,{title:"Titulo de la Noticia",dataIndex:"titulo",key:"titulo"}),c.a.createElement(Ht,{title:"Accion",key:"Accion",align:"center",render:function(e,t){var a;return c.a.createElement(c.a.Fragment,null,0===(null===(a=t.esDestacado)||void 0===a?void 0:a.length)?c.a.createElement(K.a,{onClick:function(){return function(e){var t=e.titulo,a=e._id;zt({title:"Destacar Noticia",icon:c.a.createElement(Bt.a,null),content:'Destacar la noticia "'.concat(t,'"?'),okText:"Si",cancelText:"No",cancelType:"Dashed",centered:!0,onOk:function(){Wt(a),n(!0)},onCancel:function(){}})}(t)},type:"primary"},"Destacar Noticia"):c.a.createElement(K.a,{onClick:function(){return function(e){var t=e.titulo,a=e.esDestacado;zt({title:"Eliminar Noticia Destacada",icon:c.a.createElement(ie.a,null),content:'Eliminar la noticia "'.concat(t,'" como destacada?'),okText:"Si",cancelText:"No",cancelType:"Dashed",centered:!0,onOk:function(){var e,t=null===a||void 0===a||null===(e=a[0])||void 0===e?void 0:e._id;Jt(t),n(!0)},onCancel:function(){}})}(t)},type:"danger"},"Quitar Noticia Destacada"))}})))};var Zt=function(){return c.a.createElement(l.a,null,c.a.createElement(B,null,c.a.createElement(s.d,null,c.a.createElement(s.b,{exact:!0,path:"/",component:qe}),c.a.createElement(s.b,{exact:!0,path:"/signup",component:J}),c.a.createElement(s.b,{exact:!0,path:"/login",component:ne}),c.a.createElement(s.b,{exact:!0,path:"/profile",component:Oe}),c.a.createElement(s.b,{exact:!0,path:"/newNoticia",component:ut}),c.a.createElement(s.b,{exact:!0,path:"/editNoticia/:noticiaId",component:Et}),c.a.createElement(s.b,{exact:!0,path:"/listNoticias",component:jt}),c.a.createElement(s.b,{exact:!0,path:"/noticia/:noticiaId",component:Mt}),c.a.createElement(s.b,{exact:!0,path:"/admin/aprobarNoticia",component:Ut}),c.a.createElement(s.b,{exact:!0,path:"/admin/destacarNoticia",component:Qt}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(447);o.a.render(c.a.createElement(M,null,c.a.createElement(Zt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[240,1,2]]]);
//# sourceMappingURL=main.192bdf36.chunk.js.map