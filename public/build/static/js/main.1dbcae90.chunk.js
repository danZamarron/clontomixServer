(this.webpackJsonpclontomixclient=this.webpackJsonpclontomixclient||[]).push([[0],{240:function(e,t,a){e.exports=a(448)},312:function(e,t,a){},448:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),o=a(27),i=a.n(o),l=a(45),s=a(43),u=a(7),m=a.n(u),d=a(11),p=a(15),f=a(449),E=a(103),v=a(237),b=a(116),g=a(79),h=a(458),O=a(463),y=a(464),x=a(465),w=a(466),j=a(467),T=a(468),k=a(81),C=a.n(k);n=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_LOCALHOST:"http://localhost:4000/",REACT_APP_REMOTEURL:"http://localhost:4000/api",REACT_APP_CLOUDINARY_URL:"https://api.cloudinary.com/v1_1/dsrw38rwx/image/upload"}).REMOTEURL,n+="auth";var S=C.a.create({withCredentials:!0,baseURL:n}),_=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.post("/signup",t).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.post("/login",t).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.get("/currentUser");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.get("/logout");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.post("/profile",t).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.post("/profileAvatar",{profilePicture:t}).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=Object(r.createContext)();function L(e){var t=e.children,a=Object(r.useState)(null),n=Object(p.a)(a,2),o=n[0],i=n[1],l=function(e){return i(e)};return Object(r.useEffect)((function(){function e(){return(e=Object(d.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:t=e.sent,a=t.data.user,l(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){o?console.log("loggeado ".concat(o)):console.log("Se logeo el user ".concat(o))}),[o]),c.a.createElement(D.Provider,{value:{user:o,setCtxUser:l,clearCtxUser:function(){return i(null)}}},t)}var F,U=f.a.Header,M=f.a.Content,Y=f.a.Footer,H=f.a.Sider,V=E.a.SubMenu,K=function(e){var t=e.children,a=Object(r.useState)(!1),n=Object(p.a)(a,2),o=(n[0],n[1],Object(r.useContext)(D)),i=o.clearCtxUser,s=o.user,u=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:i(),v.b.success("Has cerrado tu sesion!");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(f.a,{style:{minHeight:"100vh"}},c.a.createElement(H,{style:{overflow:"auto",height:"100vh",position:"fixed",left:0}},c.a.createElement(E.a,{theme:"dark",defaultSelectedKeys:["1"],mode:"inline"},c.a.createElement(E.a.Item,{key:"1",icon:c.a.createElement(O.a,null)},c.a.createElement(l.b,{to:"/"},"Home")),!s&&c.a.createElement(E.a.Item,{key:"2",icon:c.a.createElement(y.a,null)},c.a.createElement(l.b,{to:"/signup"},"Signup")),!s&&c.a.createElement(E.a.Item,{key:"3",icon:c.a.createElement(x.a,null)},c.a.createElement(l.b,{to:"/login"},"Login")),s&&c.a.createElement(E.a.Item,{key:"4",icon:c.a.createElement(y.a,null)},c.a.createElement(l.b,{to:"/profile"},"Mi Perfil")),s&&c.a.createElement(E.a.Item,{key:"5",icon:c.a.createElement(w.a,null)},c.a.createElement(l.b,{to:"/",icon:c.a.createElement(w.a,null),onClick:u},"logout")),s&&("Editor"===s.roleType||"Admin"===s.roleType)&&c.a.createElement(V,{key:"sub1",icon:c.a.createElement(j.a,null),title:"User"},c.a.createElement(E.a.Item,{key:"101"},c.a.createElement(l.b,{to:"/listNoticias"},"Mis Noticias")),c.a.createElement(E.a.Item,{key:"100"},c.a.createElement(l.b,{to:"/newNoticia"},"Nueva Noticia")),c.a.createElement(E.a.Item,{key:"102"},"Alex")),s&&"Admin"===s.roleType&&c.a.createElement(V,{key:"sub2",icon:c.a.createElement(j.a,null),title:"Admin Menu"},c.a.createElement(E.a.Item,{key:"200"},c.a.createElement(l.b,{to:"/admin/aprobarNoticia"},"Aprobar Noticia")),c.a.createElement(E.a.Item,{key:"201"},c.a.createElement(l.b,{to:"/admin/destacarNoticia"},"Destacar Noticia"))),c.a.createElement(E.a.Item,{key:"9",icon:c.a.createElement(T.a,null)},c.a.createElement(l.b,{to:"/logout"},"Algo aqui")))),c.a.createElement(f.a,{className:"site-layout",style:{marginLeft:200}},c.a.createElement(U,{className:"site-layout-background",style:{padding:0,backgroundColor:"rgb(100,100,100,1)"}},c.a.createElement(b.a,{justify:"center",align:"middle"},c.a.createElement(g.a,null,c.a.createElement(h.a.Title,{level:1,style:{color:"White"}},"ClonTomix")))),c.a.createElement(M,{style:{margin:"24px 16px 0",overflow:"initial"}},c.a.createElement("div",{className:"site-layout-background",style:{padding:24,minHeight:360}},t)),c.a.createElement(Y,{style:{textAlign:"center"}},"Clontomix \xa92020. Creado por D Zam, dise\xf1o de Ant D")))},W=(a(312),a(457)),q=a(461),B=a(46),z=h.a.Title,G={wrapperCol:{xs:{span:24,offset:0},sm:{span:12,offset:6}}},J=function(e){var t=W.a.useForm(),a=Object(p.a)(t,1)[0],n=Object(r.useState)(!1),o=Object(p.a)(n,2),i=o[0],l=o[1],s=Object(r.useState)(""),u=Object(p.a)(s,2),f=u[0],E=u[1],h=function(){var t=Object(d.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(!1),t.next=3,_(a);case 3:200===(n=t.sent).status?(v.b.success("Gracias por registrarse!"),e.history.push("/login")):(console.log(n),l(!0),E(n.message));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement(b.a,{justify:"center",gutter:24},c.a.createElement(g.a,G,c.a.createElement(z,{level:3},"Registro"))),c.a.createElement(W.a,{layout:"vertical",form:a,name:"register",onFinish:h,scrollToFirstError:!0},c.a.createElement(W.a.Item,{name:"username",label:"Nombre",rules:[{required:!0,message:"Favor de agregar un nombre de usuario",whitespace:!0}]},c.a.createElement(q.a,null)),c.a.createElement(W.a.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:"El email no es valido"},{required:!0,message:"Favor de agregar un email"}]},c.a.createElement(q.a,null)),c.a.createElement(W.a.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Favor de introducir un password"}],hasFeedback:!0},c.a.createElement(q.a.Password,null)),c.a.createElement(W.a.Item,{name:"confirmPassword",label:"Confirm Password",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Favor de confirmar su password"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject("Las password no coinciden"):Promise.resolve()}}}]},c.a.createElement(q.a.Password,null)),c.a.createElement(b.a,{justify:"center"},c.a.createElement(g.a,G,i&&c.a.createElement(z,{level:5,type:"warning"},f))),c.a.createElement(W.a.Item,G,c.a.createElement(B.a,{type:"primary",htmlType:"submit",block:!0,style:{marginTop:"30px"}},"Register"))))},Q=a(450),Z=a(469),$=a(470),X=a(471),ee=h.a.Title;F=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_LOCALHOST:"http://localhost:4000/",REACT_APP_REMOTEURL:"http://localhost:4000/api",REACT_APP_CLOUDINARY_URL:"https://api.cloudinary.com/v1_1/dsrw38rwx/image/upload"}).REMOTEURLs;var te,ae={wrapperCol:{xs:{span:24,offset:0},sm:{span:12,offset:6}}},ne=function(e){var t=W.a.useForm(),a=Object(p.a)(t,1)[0],n=Object(r.useState)(!1),o=Object(p.a)(n,2),i=o[0],l=o[1],s=Object(r.useState)(""),u=Object(p.a)(s,2),f=u[0],E=u[1],h=Object(r.useContext)(D).setCtxUser,O=function(){var t=Object(d.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(!1),t.next=3,A(a);case 3:200===(n=t.sent).status?(n.data.password="",h(n.data),r=n.data.username,v.b.success("Gracias por entrar ".concat(r)),e.history.push("/")):(console.log(n),l(!0),E(n.message));case 5:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}();return c.a.createElement("div",null,c.a.createElement(W.a,{name:"normal_login",form:a,layout:"vertical",className:"login-form",initialValues:{remember:!0},onFinish:O},c.a.createElement(W.a.Item,{name:"email",label:"Email",rules:[{type:"email",message:"El email no es valido"},{required:!0,message:"Favor de introducir su email"}]},c.a.createElement(q.a,{prefix:c.a.createElement(Z.a,{className:"site-form-item-icon"}),placeholder:"usuario@clontomix.com"})),c.a.createElement(W.a.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Favor de introducir su password!"}]},c.a.createElement(q.a,{prefix:c.a.createElement($.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password..."})),c.a.createElement(b.a,{justify:"center"},c.a.createElement(g.a,ae,i&&c.a.createElement(ee,{level:5,type:"warning"},f))),c.a.createElement(W.a.Item,ae,c.a.createElement(B.a,{type:"primary",htmlType:"submit",className:"login-form-button",block:!0,style:{marginTop:"30px"}},"Log in"))),c.a.createElement(Q.a,null,"Or"),c.a.createElement(b.a,null,c.a.createElement(g.a,{xs:24,sm:{span:12,offset:6}},c.a.createElement("a",{style:{color:"white",textDecoration:"none !important"},href:"".concat(F,"auth/google")},c.a.createElement(B.a,{danger:!0,type:"primary",block:!0,style:{marginTop:"20px"}},c.a.createElement(X.a,null),"Login con Google")))))},re=a(453),ce=a(459),oe=a(472);te=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_LOCALHOST:"http://localhost:4000/",REACT_APP_REMOTEURL:"http://localhost:4000/api",REACT_APP_CLOUDINARY_URL:"https://api.cloudinary.com/v1_1/dsrw38rwx/image/upload"}).REMOTEURL,te+="api/comentario";var ie,le=C.a.create({withCredentials:!0,baseURL:te}),se=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.get("/").catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=Object(d.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.post("/".concat(t),a).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),me=function(){var e=Object(d.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.put("/".concat(t),a).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),de=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.delete("/".concat(t)).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=a(58),fe=q.a.TextArea,Ee=h.a.Title,ve=function(){return v.b.success("Se edito el comentario satisfactoriamente")},be=Object(r.forwardRef)((function(e,t){var a=e.comment,n=a._id,o=a.comentario,i=a.idNoticia.titulo,l=e.closeModal,s=e.changeData,u=W.a.useForm(),f=Object(p.a)(u,1)[0],E=Object(r.useState)(!1),v=Object(p.a)(E,2),h=v[0],O=v[1],y=Object(r.useState)(""),x=Object(p.a)(y,2),w=x[0],j=x[1];function T(){return(T=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!1),e.next=3,me(n,t);case 3:201===(a=e.sent).status||200===a.status?(ve(),l(!1),s(!0)):(console.log(a),O(!0),j(a.message));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useImperativeHandle)(t,(function(){return{showAlert:function(){f.submit()}}})),Object(r.useEffect)((function(){return function(){console.log("dismount"),f.resetFields(["comentario"])}}),[n]),c.a.createElement(c.a.Fragment,null,c.a.createElement(W.a,{layout:"vertical",form:f,onFinish:function(e){return T.apply(this,arguments)}},c.a.createElement(W.a.Item,{name:"comentario",label:"Edita el comentario de la noticia ".concat(i),initialValue:o,rules:[{min:10,message:"Favor de escribir mas de 10 caracteres"},{required:!0,message:"Favor de escribir un comentario",whitespace:!0}]},c.a.createElement(fe,{allowClear:!0,rows:8})),c.a.createElement(b.a,{justify:"center"},c.a.createElement(g.a,{xs:24,sm:12},h&&c.a.createElement(Ee,{level:5,type:"warning"},w)))))})),ge=h.a.Title,he=re.a.Column,Oe=ce.a.confirm,ye=q.a.TextArea,xe=function(){return v.b.success("Se actualizo los datos satisfactoriamente")},we={wrapperCol:{xs:{span:24,offset:0},sm:{span:12,offset:6}}},je=function(){var e,t=W.a.useForm(),a=Object(p.a)(t,1)[0],n=Object(r.useState)(!1),o=Object(p.a)(n,2),i=o[0],l=o[1],s=Object(r.useState)(""),u=Object(p.a)(s,2),f=u[0],E=u[1],v=Object(r.useState)(!1),h=Object(p.a)(v,2),O=h[0],y=h[1],x=Object(r.useState)(!1),w=Object(p.a)(x,2),j=w[0],T=w[1],k=Object(r.useState)(!1),S=Object(p.a)(k,2),_=S[0],A=S[1],I=Object(r.useContext)(D),L=I.setCtxUser,F=I.user,U=Object(r.useState)(null),M=Object(p.a)(U,2),Y=M[0],H=M[1],V=Object(r.useState)(!1),K=Object(p.a)(V,2),z=K[0],G=K[1],J=Object(r.useState)({}),Z=Object(p.a)(J,2),$=Z[0],X=Z[1],ee=Object(r.useRef)(),te=function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(t);case 2:if(201!==(a=e.sent).status&&200!==a.status){e.next=13;break}return xe(),e.next=7,P();case 7:n=e.sent,r=n.data.user,L(r),y(!0),e.next=16;break;case 13:console.log(a),l(!0),E(a.message);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n,r,c,o,i,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files,(n=new FormData).append("file",a[0]),n.append("upload_preset","ma1cews4"),e.next=6,C.a.post("https://api.cloudinary.com/v1_1/dsrw38rwx/image/upload",n);case 6:return r=e.sent,c=r.data.secure_url,e.next=10,N(c);case 10:if(201!==(o=e.sent).status&&200!==o.status){e.next=21;break}return xe(),e.next=15,P();case 15:i=e.sent,s=i.data.user,L(s),T(!0),e.next=24;break;case 21:console.log(o),l(!0),E(o.message);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){function e(){return(e=Object(d.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se();case 2:t=e.sent,a=t.data.comentariosPorUser,H(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),A(!1),T(!1),y(!1)}),[O,j,_]),F?c.a.createElement("div",null,c.a.createElement(b.a,{gutter:24},c.a.createElement(g.a,we,c.a.createElement(ge,{level:2},"Mi Perfil"))),c.a.createElement(b.a,null,c.a.createElement(g.a,{xs:12},c.a.createElement(W.a,{layout:"vertical",form:a,onFinish:te},c.a.createElement(W.a.Item,{name:"facebook",label:"Facebook Link",initialValue:null===F||void 0===F?void 0:F.facebook},c.a.createElement(q.a,null)),c.a.createElement(W.a.Item,{name:"twitter",label:"Twitter Link",initialValue:null===F||void 0===F?void 0:F.twitter},c.a.createElement(q.a,null)),c.a.createElement(W.a.Item,{name:"acercaDe",label:"Acerca de ti",initialValue:null===F||void 0===F?void 0:F.acercaDe},c.a.createElement(ye,{allowClear:!0,rows:4})),c.a.createElement(b.a,{justify:"center"},c.a.createElement(g.a,{xs:24},i&&c.a.createElement(ge,{level:5,type:"warning"},f))),c.a.createElement(W.a.Item,we,c.a.createElement(B.a,{type:"primary",htmlType:"submit",block:!0,style:{marginTop:"30px"}},"Actualizar Datos")))),c.a.createElement(g.a,{xs:12},c.a.createElement(b.a,{justify:"center",align:"middle",style:{marginBottom:"40px"}},c.a.createElement("img",{style:{objectFit:"cover",width:"300px",height:"300px",borderRadius:"200px"},alt:"perfil",src:null===F||void 0===F?void 0:F.profilePicture})),c.a.createElement(b.a,{justify:"center",align:"middle"},c.a.createElement("input",{type:"file",id:"file",onChange:ae}),c.a.createElement("label",{htmlFor:"file"},"Upload")))),c.a.createElement(Q.a,null),c.a.createElement(b.a,{justify:"center",gutter:24},c.a.createElement(g.a,we,c.a.createElement(ge,{level:3},"Mis comentarios "))),c.a.createElement(re.a,{key:"comentarios",rowKey:function(e){return e._id},dataSource:Y},c.a.createElement(he,{title:"Titulo de la Noticia",dataIndex:"idNoticia.titulo",key:"idNoticia.titulo",render:function(e,t){return t.idNoticia.titulo}}),c.a.createElement(he,{title:"Comentario",dataIndex:"comentario",key:"comentario"}),c.a.createElement(he,{title:"Fecha",dataIndex:"createdAt",key:"createdAt",render:function(e,t){return pe.DateTime.fromISO(t.createdAt).toLocaleString(pe.DateTime.DATETIME_SHORT)}}),c.a.createElement(he,{title:"Editar Comentario",key:"Editar",render:function(e,t){return c.a.createElement(c.a.Fragment,null,c.a.createElement(B.a,{onClick:function(){G(!0),X(t)},type:"primary"},"Editar"))}}),c.a.createElement(he,{title:"Borrar Comentario",key:"Borrar",render:function(e,t){return c.a.createElement(c.a.Fragment,null,c.a.createElement(B.a,{onClick:function(){return function(e){var t=e.idNoticia.titulo,a=e._id;Oe({title:"Eliminar Comentario",icon:c.a.createElement(oe.a,null),content:"Desea eliminar el comentario en la noticia ".concat(t,'"?'),okText:"Si",okType:"Primary",cancelText:"No",centered:!0,onOk:function(){return Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de(a);case 2:A(!0);case 3:case"end":return e.stop()}}),e)})))()},onCancel:function(){}})}(t)},type:"danger"},"Borrar"))}})),c.a.createElement(ce.a,{centered:!0,title:"Agrega Comentario a "+(null===$||void 0===$||null===(e=$.idNoticia)||void 0===e?void 0:e.titulo),visible:z,onCancel:function(){return G(!1)},onOk:function(){ee.current.showAlert()},okType:"primary",width:700},c.a.createElement(be,{ref:ee,comment:$,closeModal:G,changeData:A}))):c.a.createElement("div",null)},Te=a(233),ke=a(456),Ce=a(222),Se=a.n(Ce),_e=h.a.Title,Ae=h.a.Text,Pe=function(e){var t,a=e.news;return c.a.createElement(c.a.Fragment,null,c.a.createElement(g.a,{sm:24,md:{span:16,offset:4}},c.a.createElement(ke.a,{style:{marginBottom:"30px",minHeight:"400px"},title:c.a.createElement(_e,{level:3},a.titulo),bordered:!1,cover:"Imagen"===a.tipoPresentacion?c.a.createElement("center",null,c.a.createElement("img",{style:{marginTop:"30px"},alt:"example",src:null===(t=a.imgArray)||void 0===t?void 0:t[0]})):c.a.createElement("center",null,c.a.createElement(Se.a,{url:"https://youtu.be/n25nqibaIDg",style:{marginTop:"30px"},light:!0}))},c.a.createElement(b.a,{gutter:[0,50]},c.a.createElement(g.a,null,a.contenido.length>500?a.contenido.substring(0,497).concat("..."):a.contenido)),c.a.createElement(Q.a,null),c.a.createElement(b.a,null,c.a.createElement(g.a,{span:12},c.a.createElement(Ae,{strong:!0},"Autor:")," ",a.idUser.username),c.a.createElement(g.a,{span:12},c.a.createElement(Ae,{strong:!0},"Fecha de Publicacion:")," ",pe.DateTime.fromISO(a.fechaParaPublicacion).toLocaleString())),c.a.createElement(b.a,null,c.a.createElement(g.a,{span:12},c.a.createElement(Ae,{strong:!0},a.idComentarios.length)," comentario(s)"),c.a.createElement(g.a,{span:12},c.a.createElement(Ae,{strong:!0},"Tipo de Noticia:")," ",a.tipoNoticia)),c.a.createElement(b.a,{gutter:20},c.a.createElement(g.a,{justify:"center",align:"middle",style:{marginTop:"20px"},span:24},c.a.createElement(_e,{level:3},c.a.createElement(l.b,{to:"/noticia/".concat(a._id)},"Ir a leer la noticia")))))))},Ie=a(451);ie=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_LOCALHOST:"http://localhost:4000/",REACT_APP_REMOTEURL:"http://localhost:4000/api",REACT_APP_CLOUDINARY_URL:"https://api.cloudinary.com/v1_1/dsrw38rwx/image/upload"}).REMOTEURL,ie+="api/destacado";var Re,Ne=C.a.create({withCredentials:!0,baseURL:ie}),De=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.get("/").catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Le=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.post("/",{idNoticia:t}).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.delete("/".concat(t)).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(r.useState)([]),t=Object(p.a)(e,2),a=t[0],n=t[1],o=Object(r.useState)(!0),i=Object(p.a)(o,2),l=i[0],s=i[1];Object(r.useEffect)((function(){function e(){return(e=Object(d.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De();case 2:t=e.sent,a=t.data,n(a),s(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){}}),[]);var u={height:"160px",color:"#fff",lineHeight:"160px",textAlign:"center",backgroundImage:'url("https://i.pinimg.com/originals/2d/6d/39/2d6d3954cab6327de170f05c266cac36.png")',objectPosition:"center",objectFit:"cover"};return l?c.a.createElement(c.a.Fragment,null,"Loading"):(l||a)&&!l&&a?c.a.createElement(Ie.a,{autoplay:!0},null===a||void 0===a?void 0:a.map((function(e){return c.a.createElement("div",{name:"Hola",key:e._id},c.a.createElement("h3",{style:u},e.idNoticia.titulo))}))):c.a.createElement(c.a.Fragment,null)},Me=h.a.Title,Ye=function(e){return fetch(e).then((function(e){return e.json()}))};Re=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_LOCALHOST:"http://localhost:4000/",REACT_APP_REMOTEURL:"http://localhost:4000/api",REACT_APP_CLOUDINARY_URL:"https://api.cloudinary.com/v1_1/dsrw38rwx/image/upload"}).REMOTEURL,console.log(Re);var He=function(){var e,t,a=Object(Te.a)((function(e,t){return t&&0===t.length?null:"".concat(Re,"api/noticia/pagination?page=").concat(e)}),Ye),n=a.data,r=a.error,o=(a.mutate,a.size),i=a.setSize,l=(a.isValidating,n?n.map((function(e){return e.noticias})):[]),s=!n&&!r||o>0&&n&&"undefined"===typeof n[o-1],u=0===(null===n||void 0===n||null===(e=n[0])||void 0===e?void 0:e.length)||n&&(null===n||void 0===n?void 0:n.length)<10;return console.log(l),n?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,c.a.createElement(b.a,{justify:"center"},c.a.createElement(g.a,{sm:24,md:{span:16}},c.a.createElement(Ue,null)))),c.a.createElement(Q.a,null),c.a.createElement("div",null,c.a.createElement(b.a,{justify:"center",gutter:30},c.a.createElement(g.a,null,c.a.createElement(Me,{level:1},"Noticias:"))),null===l||void 0===l||null===(t=l.flat())||void 0===t?void 0:t.map((function(e){return c.a.createElement(Pe,{key:e._id,news:e})}))),c.a.createElement("div",null,c.a.createElement("button",{disabled:s||u,onClick:function(){return i(o+1)}},s?"loading...":u?"no more issues":"load more"))):c.a.createElement("p",null,"Loading...")},Ve=a(67),Ke=a(131),We=a(454),qe=a(455);var Be,ze=function(e){var t=e.setPhotos,a=e.setArrayPhotos,n=Object(r.useState)({previewVisible:!1,previewImage:"",previewTitle:"",fileList:[],uploaded:[]}),o=Object(p.a)(n,2),i=o[0],l=o[1];function s(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))}var u=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,s(t.originFileObj);case 3:t.preview=e.sent;case 4:l(Object(Ve.a)(Object(Ve.a)({},i),{},{previewImage:t.url||t.preview,previewVisible:!0,previewTitle:t.name||t.url.substring(t.url.lastIndexOf("/")+1)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function f(){return(f=Object(d.a)(m.a.mark((function e(a){var n,r,c,o,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.file,r=a.onSuccess,e.prev=1,(c=new FormData).append("file",n),c.append("upload_preset","ma1cews4"),e.next=7,fetch("https://api.cloudinary.com/v1_1/dsrw38rwx/image/upload",{method:"POST",body:c});case 7:return o=e.sent,e.next=10,o.json();case 10:i=e.sent,t(i.secure_url),r(i,n),e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(1),e.t0;case 18:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}var E=i.previewVisible,v=i.previewImage,b=i.fileList,g=i.previewTitle,h=c.a.createElement("div",null,c.a.createElement("div",{className:"ant-upload-text"},"Upload photo"));return c.a.createElement("div",{className:"clearfix"},c.a.createElement(qe.a,{listType:"picture-card",fileList:b,onPreview:u,onChange:function(e){var t=e.fileList;l(Object(Ve.a)(Object(Ve.a)({},i),{},{fileList:t}));var n=[];0!==t.length?(t.forEach((function(e,t){var a;n.push(null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.secure_url)})),a(n)):a(n)},customRequest:function(e){return f.apply(this,arguments)}},b.length>=8?null:h),c.a.createElement(ce.a,{visible:E,title:g,footer:null,onCancel:function(){return l(Object(Ve.a)(Object(Ve.a)({},i),{},{previewVisible:!1}))}},c.a.createElement("img",{alt:"example",style:{width:"100%"},src:v})))};Be=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_LOCALHOST:"http://localhost:4000/",REACT_APP_REMOTEURL:"http://localhost:4000/api",REACT_APP_CLOUDINARY_URL:"https://api.cloudinary.com/v1_1/dsrw38rwx/image/upload"}).REMOTEURL,Be+="api/noticia";var Ge=C.a.create({withCredentials:!0,baseURL:Be}),Je=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge.get("/user/".concat(t)).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge.post("/",t).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ze=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge.get("/detail/".concat(t)).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$e=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge.put("/edit/".concat(t.noticiaId),t).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xe=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge.delete("/delete/".concat(t)).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),et=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge.get("/notApproved").catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),tt=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge.put("/approved/".concat(t)).catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),at=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge.get("/noticiasDestacadas").catch((function(e){var t,a;return{message:null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,status:null===e||void 0===e?void 0:e.status}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),nt=a(52),rt=a.n(nt),ct=q.a.TextArea,ot=Ke.a.Option,it=h.a.Title,lt=rt()().format("DD/MM/YYYY"),st={wrapperCol:{xs:{span:24,offset:0},sm:{span:12,offset:6}}},ut=function(e){var t=W.a.useForm(),a=Object(p.a)(t,1)[0],n=Object(r.useState)(!1),o=Object(p.a)(n,2),i=o[0],l=o[1],s=Object(r.useState)(""),u=Object(p.a)(s,2),f=u[0],E=u[1],h=Object(r.useState)(!1),O=Object(p.a)(h,2),y=O[0],x=O[1],w=Object(r.useState)([]),j=Object(p.a)(w,2),T=j[0],k=j[1],C=Object(r.useState)(""),S=Object(p.a)(C,2),_=(S[0],S[1]),A=function(){var t=Object(d.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l(!1),0!==T.length||"Imagen"!==a.tipoPresentacion){t.next=5;break}return l(!0),E("Es necesario agregar imagenes"),t.abrupt("return",!1);case 5:return t.next=7,Qe(Object(Ve.a)(Object(Ve.a)({},a),{},{imgArray:T}));case 7:200===(n=t.sent).status||201===n.status?(v.b.success("Se agrego la noticia satisfactoriamente"),e.history.push("/")):(console.log(n),l(!0),E(n.message));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return c.a.createElement("div",null,c.a.createElement(b.a,{justify:"center",gutter:16},c.a.createElement(g.a,st,c.a.createElement(it,{level:2},"Agregar Noticia"))),c.a.createElement(W.a,{layout:"vertical",form:a,name:"register",onFinish:A,scrollToFirstError:!0},c.a.createElement(W.a.Item,{name:"titulo",label:"Titulo de la Noticia",rules:[{required:!0,message:"Favor de agregar un titulo",whitespace:!0}]},c.a.createElement(q.a,null)),c.a.createElement(W.a.Item,{name:"contenido",label:"Contenido de la Noticia",rules:[{required:!0,message:"Es necesario agregar contenido a la noticia",whitespace:!0}]},c.a.createElement(ct,null)),c.a.createElement(W.a.Item,{name:"fechaParaPublicacion",label:"Cuando se publica la noticia"},c.a.createElement(We.a,{placeholder:"Elige Fecha",defaultValue:rt()(lt,"DD/MM/YYYY"),format:"DD/MM/YYYY"})),c.a.createElement(W.a.Item,{name:"tipoNoticia",label:"Tipo de Noticia",initialValue:"Editorial",rules:[{required:!0,message:"Es necesario escoger un tipo"}]},c.a.createElement(Ke.a,null,c.a.createElement(ot,{value:"Editorial"},"Editorial"),c.a.createElement(ot,{value:"Rumor"},"Rumor"),c.a.createElement(ot,{value:"Review"},"Review "))),c.a.createElement(W.a.Item,{name:"tipoPresentacion",label:"Tipo de Portada (Imagen o Video)",initialValue:"Imagen",rules:[{required:!0,message:"Es necesario escoger un tipo de presentacion"}]},c.a.createElement(Ke.a,{onChange:function(){x(!y),console.log(y)}},c.a.createElement(ot,{value:"Imagen"},"Imagen"),c.a.createElement(ot,{value:"Video"},"Video"))),c.a.createElement(W.a.Item,{name:"ytLink",label:"Link de Video Youtube",hidden:!y,rules:[{required:!!y,message:"Favor de agregar un link",whitespace:!0}]},c.a.createElement(q.a,null)),c.a.createElement(W.a.Item,{name:"Imagenes",label:"Imagenes",hidden:y},c.a.createElement(ze,{setArrayPhotos:k,setPhotos:_})),c.a.createElement(b.a,{justify:"center"},c.a.createElement(g.a,st,i&&c.a.createElement(it,{level:5,type:"warning"},f))),c.a.createElement(W.a.Item,st,c.a.createElement(B.a,{type:"primary",htmlType:"submit",block:!0,style:{marginTop:"30px"}},"A\xf1adir Noticia"))))},mt=q.a.TextArea,dt=Ke.a.Option,pt=h.a.Title,ft=h.a.Text,Et=(rt()().format("DD/MM/YYYY"),{wrapperCol:{xs:{span:24,offset:0},sm:{span:12,offset:6}}}),vt=function(e){var t=W.a.useForm(),a=Object(p.a)(t,1)[0],n=Object(r.useState)(!1),o=Object(p.a)(n,2),i=o[0],l=o[1],s=Object(r.useState)(""),u=Object(p.a)(s,2),f=u[0],E=u[1],h=Object(r.useState)(null),O=Object(p.a)(h,2),y=O[0],x=O[1],w=e.match.params.noticiaId,j=function(){var t=Object(d.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(!1),t.next=3,$e(Object(Ve.a)(Object(Ve.a)({},a),{},{noticiaId:w}));case 3:201===(n=t.sent).status?(v.b.success("Se edito la noticia satisfactoriamente"),e.history.push("/listNoticias")):(console.log(n),l(!0),E(n.message));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){function e(){return(e=Object(d.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze(w);case 2:t=e.sent,a=t.data,console.log(a.fechaParaPublicacion),x(a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),y?c.a.createElement("div",null,c.a.createElement(b.a,{justify:"center",gutter:16},c.a.createElement(g.a,Et,c.a.createElement(pt,{level:2},"Editar Noticia"))),!y.noticiaAprobada&&c.a.createElement(b.a,{justify:"center",gutter:16},c.a.createElement(g.a,Et,c.a.createElement(ft,{level:2,type:"danger"},"Esta noticia aun no ha sido aprobada"))),c.a.createElement(W.a,{layout:"vertical",form:a,name:"register",onFinish:j,scrollToFirstError:!0},c.a.createElement(W.a.Item,{name:"titulo",label:"Titulo de la Noticia",initialValue:y.titulo,rules:[{required:!0,message:"Favor de agregar un titulo",whitespace:!0}]},c.a.createElement(q.a,null)),c.a.createElement(W.a.Item,{name:"contenido",label:"Contenido de la Noticia",initialValue:y.contenido,rules:[{required:!0,message:"Es necesario agregar contenido a la noticia",whitespace:!0}]},c.a.createElement(mt,null)),c.a.createElement(W.a.Item,{name:"fechaParaPublicacion",label:"Cuando se publica la noticia",initialValue:rt()(rt()(y.fechaParaPublicacion).format("DD/MM/YYYY"),"DD/MM/YYYY")},c.a.createElement(We.a,{placeholder:"Elige Fecha",format:"DD/MM/YYYY"})),c.a.createElement(W.a.Item,{name:"tipoNoticia",label:"Tipo de Noticia",initialValue:y.tipoNoticia,rules:[{required:!0,message:"Es necesario escoger un tipo"}]},c.a.createElement(Ke.a,null,c.a.createElement(dt,{value:"Editorial"},"Editorial"),c.a.createElement(dt,{value:"Rumor"},"Rumor"),c.a.createElement(dt,{value:"Review"},"Review "))),c.a.createElement(b.a,{justify:"center"},c.a.createElement(g.a,Et,i&&c.a.createElement(pt,{level:5,type:"warning"},f))),c.a.createElement(W.a.Item,Et,c.a.createElement(B.a,{type:"primary",htmlType:"submit",block:!0,style:{marginTop:"30px"}},"Editar Noticia")))):c.a.createElement("div",null,"Estoy cargando")},bt=a(462),gt=re.a.Column,ht=ce.a.confirm,Ot=h.a.Title,yt={wrapperCol:{xs:{span:24,offset:0},sm:{span:12,offset:6}}};function xt(){return(xt=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe(t);case 2:200===(a=e.sent).status?alert("Todo bien"):console.log(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var wt=function(){var e=Object(r.useState)(!1),t=Object(p.a)(e,2),a=t[0],n=t[1],o=Object(r.useState)([]),i=Object(p.a)(o,2),s=i[0],u=i[1],f=Object(r.useContext)(D).user;function E(e){var t=e.titulo,a=e._id;ht({title:"Borrar Noticia",icon:c.a.createElement(oe.a,null),content:"En verdad deseas eliminar la noticia: ".concat(t),okText:"Si",okType:"danger",cancelText:"No",onOk:function(){!function(e){xt.apply(this,arguments)}(a),n(!0)},onCancel:function(){}})}return Object(r.useEffect)((function(){function e(){return(e=Object(d.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je(null===f||void 0===f?void 0:f._id);case 2:t=e.sent,a=t.data,u(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),n(!1)}),[a,f]),c.a.createElement("div",null,c.a.createElement(b.a,{justify:"center",gutter:24},c.a.createElement(g.a,yt,c.a.createElement(Ot,{level:3},"Mis noticias publicadas"))),s?c.a.createElement(re.a,{key:"x",rowKey:function(e){return e._id},dataSource:s},c.a.createElement(gt,{title:"Titulo de la Noticia",dataIndex:"titulo",key:"titulo"}),c.a.createElement(gt,{title:"Aprobada",dataIndex:"noticiaAprobada",key:"noticiaAprobada",render:function(e,t){return t.noticiaAprobada?"Si":"no"}}),c.a.createElement(gt,{title:"Fecha para Publicar",dataIndex:"fechaParaPublicacion",key:"fechaParaPublicacion",render:function(e,t){return rt()(t.fechaParaPublicacion).format("DD/MM/YYYY")}}),c.a.createElement(gt,{title:"Editar",key:"editar",render:function(e,t){return c.a.createElement(bt.b,{size:"middle"},c.a.createElement(B.a,{type:"primary"},c.a.createElement(l.b,{to:"/editNoticia/".concat(t._id)},"Editar Noticia")))}}),c.a.createElement(gt,{title:"Borrar",key:"Borrar",render:function(e,t){return c.a.createElement(bt.b,{size:"middle"},c.a.createElement(B.a,{onClick:function(){return E(t)},danger:!0,type:"dashed"},"Borrar Noticia"))}})):c.a.createElement("h1",null,"Hola"))},jt=q.a.TextArea,Tt=h.a.Title,kt=function(){return v.b.success("Se agrego el comentario satisfactoriamente")},Ct=Object(r.forwardRef)((function(e,t){var a=e.noticiaId,n=e.titulo,o=e.closeModal,i=e.addedComment,l=W.a.useForm(),s=Object(p.a)(l,1)[0],u=Object(r.useState)(!1),f=Object(p.a)(u,2),E=f[0],v=f[1],h=Object(r.useState)(""),O=Object(p.a)(h,2),y=O[0],x=O[1];function w(){return(w=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!1),e.next=3,ue(a,t);case 3:201===(n=e.sent).status||200===n.status?(kt(),o(!1),i(!0)):(console.log(n),v(!0),x(n.message));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useImperativeHandle)(t,(function(){return{showAlert:function(){s.submit()}}})),Object(r.useEffect)((function(){return function(){console.log("dismount"),s.resetFields(["comentario"])}})),c.a.createElement(c.a.Fragment,null,c.a.createElement(W.a,{layout:"vertical",form:s,onFinish:function(e){return w.apply(this,arguments)}},c.a.createElement(W.a.Item,{name:"comentario",label:"Agrega un comentario a ".concat(n),rules:[{min:10,message:"Favor de escribir mas de 10 caracteres"},{required:!0,message:"Favor de escribir un comentario",whitespace:!0}]},c.a.createElement(jt,{allowClear:!0,rows:8})),c.a.createElement(b.a,{justify:"center"},c.a.createElement(g.a,{xs:24,sm:12},E&&c.a.createElement(Tt,{level:5,type:"warning"},y)))))})),St=h.a.Title,_t=h.a.Text,At=function(e){var t=e.news;return c.a.createElement(c.a.Fragment,null,c.a.createElement(g.a,{sm:24,md:{span:16,offset:4}},c.a.createElement(ke.a,{style:{marginBottom:"30px",borderRadius:"10px"},title:c.a.createElement(St,{level:2},t.titulo),bordered:!1,cover:c.a.createElement("div",null,"Imagen")},c.a.createElement(b.a,{gutter:[0,50]},c.a.createElement(g.a,null,c.a.createElement("p",{style:{fontSize:"16px"}},t.contenido))),c.a.createElement(Q.a,null),c.a.createElement(b.a,null,c.a.createElement(g.a,{span:12},c.a.createElement(_t,{strong:!0},"Autor:")," ",t.idUser.username),c.a.createElement(g.a,{span:12},c.a.createElement(_t,{strong:!0},"Fecha de Publicacion:")," ",pe.DateTime.fromISO(t.fechaParaPublicacion).toLocaleString())),c.a.createElement(b.a,null,c.a.createElement(g.a,{span:12},c.a.createElement(_t,{strong:!0},t.idComentarios.length)," comentario(s)"),c.a.createElement(g.a,{span:12},c.a.createElement(_t,{strong:!0},"Tipo de Noticia:")," ",t.tipoNoticia)))))},Pt=a(452),It=a(460),Rt=a(76),Nt=function(e){var t=e.values;return c.a.createElement(g.a,{sm:24,md:{span:16,offset:4}},c.a.createElement(Pt.a,{style:{border:"1px solid black",borderRadius:"20px",padding:"20px",background:"white",marginBottom:"20px"},author:c.a.createElement("span",{style:{fontSize:"16px"}},t.idUser.username),avatar:c.a.createElement(It.a,{className:"extra",shape:"square",size:64,src:t.idUser.profilePicture,alt:t.idUser.username}),content:c.a.createElement("p",{style:{fontSize:"16px"}},t.comentario),datetime:c.a.createElement(Rt.a,{title:pe.DateTime.fromISO(t.createdAt).toLocaleString(pe.DateTime.DATETIME_SHORT)},c.a.createElement("span",null,pe.DateTime.local().toRelative({base:pe.DateTime.fromISO(t.createdAt)})))}))},Dt=h.a.Title,Lt=function(e){var t,a=e.match.params.noticiaId,n=Object(r.useState)(null),o=Object(p.a)(n,2),i=o[0],l=o[1],s=Object(r.useState)(!1),u=Object(p.a)(s,2),f=u[0],E=u[1],v=Object(r.useState)(!1),h=Object(p.a)(v,2),O=h[0],y=h[1],x=Object(r.useRef)();return Object(r.useEffect)((function(){function e(){return(e=Object(d.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze(a);case 2:t=e.sent,n=t.data,l(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),y(!1)}),[O]),i&&i.noticiaAprobada?c.a.createElement(c.a.Fragment,null,c.a.createElement(At,{news:i}),c.a.createElement(b.a,{gutter:[16,16]},c.a.createElement(g.a,{sm:24,md:{span:16,offset:4}},c.a.createElement(Q.a,null))),c.a.createElement(b.a,{gutter:[16,16]},c.a.createElement(g.a,{sm:24,md:{span:16,offset:4}},c.a.createElement(B.a,{block:!0,type:"primary",onClick:function(){return E(!0)}},"Agrega un Comentario"),c.a.createElement(ce.a,{centered:!0,title:"Agrega Comentario a "+i.titulo,visible:f,onCancel:function(){return E(!1)},onOk:function(){x.current.showAlert()},width:700},c.a.createElement(Ct,{ref:x,noticiaId:i._id,titulo:i.titulo,closeModal:E,addedComment:y})))),c.a.createElement(b.a,{gutter:[16,16]},c.a.createElement(g.a,{sm:24,md:{span:16,offset:4}},c.a.createElement(Q.a,null))),c.a.createElement(b.a,{gutter:[16,16]},c.a.createElement(g.a,{sm:24,md:{span:16,offset:4}},c.a.createElement(Dt,{level:4},"Comentarios"))),null===(t=i.idComentarios.flat())||void 0===t?void 0:t.map((function(e){return c.a.createElement(Nt,{key:e._id,values:e})}))):i&&!i.noticiaAprobada?c.a.createElement(c.a.Fragment,null,c.a.createElement(b.a,{gutter:[16,16]},c.a.createElement(g.a,{xs:24},c.a.createElement("h1",null,"Esta noticia se esta cocinando...")))):c.a.createElement("h1",null,"Esta noticia se esta preparando...")},Ft=re.a.Column,Ut=ce.a.confirm,Mt=h.a.Title,Yt={wrapperCol:{xs:{span:24,offset:0},sm:{span:12,offset:6}}},Ht=function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt(t);case 2:200===(a=e.sent).status?v.b.success("Se aprobo la noticia satisfactoriamente"):console.log(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Vt=function(){var e=Object(r.useState)(!1),t=Object(p.a)(e,2),a=t[0],n=t[1],o=Object(r.useState)([]),i=Object(p.a)(o,2),l=i[0],u=i[1],f=Object(r.useContext)(D).user;return Object(r.useEffect)((function(){function e(){return(e=Object(d.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et();case 2:t=e.sent,a=t.data.noticiasNotApproved,u(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),n(!1)}),[a,f]),!f||f&&"Admin"!==f.roleType?c.a.createElement(s.a,{to:"/"}):c.a.createElement("div",null,c.a.createElement(b.a,{justify:"center",gutter:24},c.a.createElement(g.a,Yt,c.a.createElement(Mt,{level:3},"Mis noticias publicadas"))),c.a.createElement(re.a,{key:"x",rowKey:function(e){return e._id},dataSource:l},c.a.createElement(Ft,{title:"Titulo de la Noticia",dataIndex:"titulo",key:"titulo"}),c.a.createElement(Ft,{title:"Fecha para Publicar",dataIndex:"fechaParaPublicacion",key:"fechaParaPublicacion",render:function(e,t){return pe.DateTime.fromISO(t.fechaParaPublicacion).toLocaleString()}}),c.a.createElement(Ft,{title:"Aprobar",key:"Aprobar",render:function(e,t){return c.a.createElement(bt.b,{size:"middle"},c.a.createElement(B.a,{onClick:function(){return function(e){var t=e.titulo,a=e._id;Ut({title:"Aprobar Noticia",icon:c.a.createElement(oe.a,null),content:'Aprobar la noticia "'.concat(t,'" para su publicacion?'),okText:"Si",cancelText:"No",cancelType:"Dashed",centered:!0,onOk:function(){Ht(a),n(!0)},onCancel:function(){}})}(t)},primary:!0,type:"dashed"},"Aprobar Noticia"))}})))},Kt=a(473),Wt=re.a.Column,qt=ce.a.confirm,Bt=h.a.Title,zt={wrapperCol:{xs:{span:24,offset:0},sm:{span:12,offset:6}}},Gt=function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le(t);case 2:200===(a=e.sent).status?v.b.success("Se agrego una noticia como destacada"):console.log(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Jt=function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe(t);case 2:200===(a=e.sent).status?v.b.success("Se elimino la noticia como destacada"):console.log(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qt=function(){var e=Object(r.useState)(!1),t=Object(p.a)(e,2),a=t[0],n=t[1],o=Object(r.useState)([]),i=Object(p.a)(o,2),l=i[0],u=i[1],f=Object(r.useContext)(D).user;return Object(r.useEffect)((function(){function e(){return(e=Object(d.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at();case 2:t=e.sent,a=t.data,u(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),n(!1)}),[a,f]),!f||f&&"Admin"!==f.roleType?c.a.createElement(s.a,{to:"/"}):c.a.createElement("div",null,c.a.createElement(b.a,{justify:"center",gutter:24},c.a.createElement(g.a,zt,c.a.createElement(Bt,{level:3},"Mis noticias publicadas"))),c.a.createElement(re.a,{key:"x",rowKey:function(e){return e._id},dataSource:l},c.a.createElement(Wt,{title:"Titulo de la Noticia",dataIndex:"titulo",key:"titulo"}),c.a.createElement(Wt,{title:"Accion",key:"Accion",align:"center",render:function(e,t){var a;return c.a.createElement(c.a.Fragment,null,0===(null===(a=t.esDestacado)||void 0===a?void 0:a.length)?c.a.createElement(B.a,{onClick:function(){return function(e){var t=e.titulo,a=e._id;qt({title:"Destacar Noticia",icon:c.a.createElement(Kt.a,null),content:'Destacar la noticia "'.concat(t,'"?'),okText:"Si",cancelText:"No",cancelType:"Dashed",centered:!0,onOk:function(){Gt(a),n(!0)},onCancel:function(){}})}(t)},type:"primary"},"Destacar Noticia"):c.a.createElement(B.a,{onClick:function(){return function(e){var t=e.titulo,a=e.esDestacado;qt({title:"Eliminar Noticia Destacada",icon:c.a.createElement(oe.a,null),content:'Eliminar la noticia "'.concat(t,'" como destacada?'),okText:"Si",cancelText:"No",cancelType:"Dashed",centered:!0,onOk:function(){var e,t=null===a||void 0===a||null===(e=a[0])||void 0===e?void 0:e._id;Jt(t),n(!0)},onCancel:function(){}})}(t)},type:"danger"},"Quitar Noticia Destacada"))}})))};var Zt=function(){return c.a.createElement(l.a,null,c.a.createElement(K,null,c.a.createElement(s.d,null,c.a.createElement(s.b,{exact:!0,path:"/",component:He}),c.a.createElement(s.b,{exact:!0,path:"/signup",component:J}),c.a.createElement(s.b,{exact:!0,path:"/login",component:ne}),c.a.createElement(s.b,{exact:!0,path:"/profile",component:je}),c.a.createElement(s.b,{exact:!0,path:"/newNoticia",component:ut}),c.a.createElement(s.b,{exact:!0,path:"/editNoticia/:noticiaId",component:vt}),c.a.createElement(s.b,{exact:!0,path:"/listNoticias",component:wt}),c.a.createElement(s.b,{exact:!0,path:"/noticia/:noticiaId",component:Lt}),c.a.createElement(s.b,{exact:!0,path:"/admin/aprobarNoticia",component:Vt}),c.a.createElement(s.b,{exact:!0,path:"/admin/destacarNoticia",component:Qt}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(447);i.a.render(c.a.createElement(L,null,c.a.createElement(Zt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[240,1,2]]]);
//# sourceMappingURL=main.1dbcae90.chunk.js.map